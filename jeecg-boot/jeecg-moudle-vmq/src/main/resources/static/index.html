
<!DOCTYPE HTML>

<html>
<head>
	<title>码支付</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<meta charset="utf-8" />
	<link rel="shortcut icon" href="/favicon.ico" />
	<link rel="bookmark" href="/favicon.ico" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="/assets/css/main.css" />
	<noscript><link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>
</head>
<body>
<div id="wrapper">

	<header id="header">
		<div class="logo">
			<span class="icon fa-rmb"></span>
		</div>
		<div class="content">
			<div class="inner">
				<h1>码支付</h1>
				<p>个人用户收款解决方案</p>
			</div>
		</div>
		<nav>
			<ul>
				<li><a href="#login">登录</a></li>
				<li><a href="#regist">注册</a></li>
				<li><a href="#pay">支付体验</a></li>
				<li><a href="#about">简介</a></li>
			</ul>
		</nav>
	</header>

	<div id="main">

		<article id="login">
			<h2 class="major">登录</h2>
			<form method="post" action="javascript:login();">
				<div class="field half first">
					<label for="user">账号</label>
					<input type="text" name="user" id="user" />
				</div>
				<div class="field half">
					<label for="pass">密码</label>
					<input type="password" name="pass" id="pass" />
				</div>

				<ul class="actions">
					<li><input id="login2" type="submit" value="登录" class="special" /></li>
					<li><input type="reset" value="清空" /></li>
				</ul>
			</form>
			<br>
			<div id="result" role="dialog">
				<p color class="h5 margin-top-sm text-black-hint" id="msg"></p>
			</div>
		</article>
		<article id="regist">
			<h2 class="major">注册</h2>
				<div style="display: flex">
					<label style="width: 150px;line-height: 40px;">账号</label>
					<input style="width: 200px;" type="text" name="username_r" id="username_r" />
				</div>
				<div style="display: flex">
					<label style="width: 150px;line-height: 40px;">密码</label>
					<input style="width: 200px;" type="password" name="password_r" id="password_r" />
				</div>
				<div style="display: flex">
					<label style="width: 150px;line-height: 40px;">密码确认</label>
					<input style="width: 200px;" type="password" name="password_r2" id="password_r2" />
				</div>
				<ul class="actions">
					<li><input id="regist2" type="submit" value="注册" class="special" onclick="regist()" /></li>
				</ul>
		</article>
		<article id="pay">
			<h3 class="major">创建订单</h3>
			<div style="display: flex">
				<label style="width: 150px;line-height: 40px;">商户编号：</label>
				<input style="width: 200px;" type="text" id="payId" name="payId" readonly><input type="submit" value="生成订单号" style="background-color: darkcyan;margin-left: 10px" onclick="getOrderNo()"/></div>

			<div style="display: flex">
				<label style="width: 150px;line-height: 40px;">订单金额：</label>
				<input style="width: 200px;" type="text" id="price" name="price" value="0.1" />
			</div>
			<div style="display: flex">
				<label style="width: 150px;line-height: 40px;">支付方式：</label>
				<select style="width: 200px" id="type" name="type" lay-verify="required" lay-filter="type">
					<option value="1" selected>微信</option><option value="2">支付宝</option>
				</select>
			</div>
			<div style="display: flex">
				<label style="width: 150px;line-height: 40px;">通知邮箱：</label>
				<input style="width: 200px;" type="email" id="email" name="email" value="" />
			</div>
			<div style="display: flex">
				<label style="width: 150px;line-height: 40px;">返回类型：</label>
				<select style="width: 200px" id="isHtml" name="isHtml" lay-verify="required" lay-filter="isHtml">
					<option value="0">JSON</option><option value="1" selected>页面</option>
				</select>
			</div>
			<div style="display: flex">
				<label style="width: 150px;line-height: 40px;">自定义参数：</label>
				<input style="width: 200px;" type="text" id="param" name="param" value="" />
			</div>
			<ul class="actions">
				<li><input type="submit" value="支付" class="special" style="background-color: forestgreen;margin-right: 50px" onclick="payOrder()" /></li>
			</ul>
		</article>

		<article id="about">
			<h2 class="major">简介</h2>
			<p>1、码支付是在V免签基础上二开，仅供交流学习使用，请勿用于商业用途。</p>
			<p>2、码支付为个人用户提供支付宝、微信的免签约收款解决方案。</p>
			<p>3、用户可以注册自己账号，并自定义支付配置信息，否则使用默认密钥。</p>
			<p>4、请遵守相关法律法规，请勿用于非法用途。</p>
			<p>5、后续版本计划：新增商品管理、商品订购页面</p>
		</article>

	</div>

	<footer id="footer">
		<p class="copyright">&copy;2024 V免签</p>
	</footer>

</div>

<div id="bg"></div>

<script src="https://cdn.jsdelivr.net/npm/jquery@1.11.3"></script>
<script src="https://cdn.jsdelivr.net/gh/ajlkn/skel@3.0.1/dist/skel.min.js"></script>
<script src="/assets/js/util.js"></script>
<script src="/assets/js/main.js"></script>
<script src="/assets/js/function.js"></script>
<script src="https://lib.baomitu.com/layer/3.1.1/layer.js"></script>


<script>
	getOrderNo();
	function getOrderNo() {
		$("#payId").val(new Date().getTime());
	}

	function payOrder() {
		var payId = $("#payId").val();
		var param = $("#param").val();
		var type = $("#type").val();
		var price = $("#price").val();
		var isHtml = $("#isHtml").val();
		var email = $("#email").val();
		creatOrder(payId,param,type,price,isHtml,email);
	}

	function login() {
		$.post("/login","user="+$("#user").val()+"&pass="+$("#pass").val(),function (data) {
			layer.msg(data.msg);
			if (data.code==1){
				window.location.href = "aaa.html?username="+data.data;
			}
		});
	}

	function regist() {
		var name = $("#username_r").val();
		var pass = $("#password_r").val();
		var pass2 = $("#password_r2").val();
		if (name.length < 4 || pass.length < 4) {
			layer.msg("用户名和密码长度均不能小于4位");
			return;
		}
		if (pass2 != pass) {
			layer.msg("两次输入密码不一致，请确认");
			return;
		}
		$.post("/regist","username="+name+"&password="+pass,function (data) {
			layer.msg(data.msg);
			if (data.code==1){
				window.location.href = "index.html";
			}
		});
	}

</script>
</body>
</html>