-- ---author:wangshuai---date:20250806-----for: 【QQYUN-12164】用户表添加个人签名和是否启用个人签名字段
ALTER TABLE sys_user 
ADD COLUMN sign_enable tinyint(1) NULL DEFAULT NULL COMMENT '是否启用个性签名（0 否 1是）' AFTER bpm_status,
ADD COLUMN sign varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '个性签名' AFTER sign_enable;

-- ---author:chenrui---date:20250806-----for: 【QQYUN-12244】AI调用模板生成word简历
INSERT INTO `airag_flow` (`id`, `create_by`, `create_time`, `update_by`, `update_time`, `sys_org_code`, `tenant_id`, `application_name`, `name`, `descr`, `icon`, `chain`, `design`, `status`, `metadata`) VALUES ('1952634605517447170', 'admin', '2025-08-05 15:35:43', 'admin', '2025-08-06 17:37:27', 'A04', NULL, 'jeecg', '示例_AI生成在线简历', '', '', 'THEN(\n    start.tag(\'start-node\'),\n    llm.tag(\'215734195065536512\'),\n    enhanceJava.tag(\'215740280715427840\'),\n    end.tag(\'215735188368998400\')\n).tag(\"start-node\")', '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":300,\"y\":404,\"properties\":{\"text\":\"开始\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"content\",\"name\":\"个人简介\",\"type\":\"string\",\"required\":true},{\"field\":\"history\",\"name\":\"历史记录\",\"type\":\"string[]\",\"required\":false},{\"field\":\"profile\",\"name\":\"基础信息\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"215734195065536512\",\"type\":\"llm\",\"x\":739,\"y\":406,\"properties\":{\"text\":\"LLM\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"这是生成在线 Word 文档的 JSON 结构说明，每个对象表示一个内容块。\\n字段说明：\\n    • type：内容类型。可选：title（标题）、list（列表）、separator（分隔线）、hyperlink（超链接）、pageBreak（分页符）、tab（制表符）、\\\"\\\"（普通文本）。\\n    • level：标题层级，仅 type 为 title 时使用，取值：first ~ sixth。\\n    • value：文本、图片地址、超链接等。\\n    • valueList：用于标题、列表、超链接等，数组元素支持 value 及样式字段。\\n    • listType：列表类型，ul（无序）、ol（有序）。\\n    • listStyle：列表样式，如 disc、decimal、circle、square、checkbox。\\n    • trList、colgroup：表格行列定义，仅用于 table。\\n    • 样式字段：font、size、bold、color、italic、highlight、underline、strikeout。\\n    • 分隔线：dashArray。\\n    • 其他：rowFlex（left、center、right、alignment）、backgroundColor、verticalAlign、textDecoration 等用于特殊样式。\\n示例：\\n[\\n  {\\n    \\\"type\\\": \\\"title\\\",\\n    \\\"level\\\": \\\"first\\\",\\n    \\\"valueList\\\": [{ \\\"value\\\": \\\"主标题示例\\\", \\\"font\\\": \\\"微软雅黑\\\", \\\"size\\\": 26, \\\"bold\\\": true, \\\"rowFlex\\\": \\\"center\\\" }]\\n  },\\n  { \\\"type\\\": \\\"\\\", \\\"value\\\": \\\"普通文本内容示例\\\" },\\n  {\\n    \\\"type\\\": \\\"list\\\",\\n    \\\"listType\\\": \\\"ul\\\",\\n    \\\"listStyle\\\": \\\"disc\\\",\\n    \\\"valueList\\\": [\\n      { \\\"value\\\": \\\"列表项1\\\" },\\n      { \\\"value\\\": \\\"列表项2\\\" }\\n    ]\\n  },\\n  { \\\"type\\\": \\\"separator\\\", \\\"dashArray\\\": [1] },\\n  {\\n    \\\"type\\\": \\\"hyperlink\\\",\\n    \\\"url\\\": \\\"https://www.example.com\\\",\\n    \\\"valueList\\\": [{ \\\"value\\\": \\\"点击访问官网\\\", \\\"color\\\": \\\"#0000FF\\\", \\\"underline\\\": true }]\\n  },\\n  { \\\"type\\\": \\\"pageBreak\\\" },\\n  { \\\"type\\\": \\\"tab\\\" },\\n  { \\\"type\\\": \\\"superscript\\\", \\\"value\\\": \\\"上标内容\\\" },\\n  { \\\"type\\\": \\\"subscript\\\", \\\"value\\\": \\\"下标内容\\\" }\\n]\\n⸻\\n注意：\\n- 只输出`json`格式。\\n- 内容结构、样式组合不限，但字段与取值必须符合说明。\\n- title类型的内容块，中value必须以`\\\\n`结尾\\n- \\\"\\\"\\\"使用`{ \\\"type\\\": \\\"\\\", \\\"value\\\": \\\"\\\\n\\\" }`进行主动换行，对象之间不会自动换行\\\"\\\"\\\"。\\n\\n\"},{\"role\":\"user\",\"content\":\"请根据以上字段和示例，生成一个完整的个人简历文档 JSON。\\n- 至少包含基础信息、个人优势、工作经历、项目经理、教育经历等模块。\\n- 若基础数据不足，可以适当生成参考数据。\\n- 用户信息如下：\\n基础资料：{{base}}\\n简介：{{profile}}\"}]},\"inputParams\":[{\"field\":\"profile\",\"name\":\"base\",\"nodeId\":\"start-node\"},{\"field\":\"content\",\"name\":\"profile\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"215735188368998400\",\"type\":\"end\",\"x\":1577,\"y\":354,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"result\",\"name\":\"resp\",\"nodeId\":\"215740280715427840\"}],\"height\":114,\"width\":332}},{\"id\":\"215740280715427840\",\"type\":\"enhanceJava\",\"x\":1156,\"y\":352,\"properties\":{\"text\":\"Java 增强\",\"options\":{\"enhance\":{\"type\":\"spring\",\"path\":\"jeecgDemoAiWordGen\"}},\"inputParams\":[{\"field\":\"text\",\"name\":\"resp\",\"nodeId\":\"215734195065536512\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"返回结果\",\"type\":\"string\"}],\"height\":180,\"width\":332}}],\"edges\":[{\"id\":\"215734195073925120\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"215734195065536512\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"215734195065536512_input\",\"pointsList\":[{\"x\":466,\"y\":389},{\"x\":566,\"y\":389},{\"x\":473,\"y\":347},{\"x\":573,\"y\":347}]},{\"id\":\"215740280719622144\",\"type\":\"base-edge\",\"sourceNodeId\":\"215734195065536512\",\"targetNodeId\":\"215740280715427840\",\"sourceAnchorId\":\"215734195065536512_output\",\"targetAnchorId\":\"215740280715427840_input\",\"pointsList\":[{\"x\":905,\"y\":347},{\"x\":1005,\"y\":347},{\"x\":890,\"y\":293},{\"x\":990,\"y\":293}]},{\"id\":\"215740398487289856\",\"type\":\"base-edge\",\"sourceNodeId\":\"215740280715427840\",\"targetNodeId\":\"215735188368998400\",\"sourceAnchorId\":\"215740280715427840_output\",\"targetAnchorId\":\"215735188368998400_input\",\"pointsList\":[{\"x\":1322,\"y\":293},{\"x\":1422,\"y\":293},{\"x\":1311,\"y\":328},{\"x\":1411,\"y\":328}]}]}', 'enable', '{\"outputs\":[{\"field\":\"result\",\"name\":\"resp\",\"nodeId\":\"215740280715427840\"}],\"inputs\":[{\"field\":\"content\",\"name\":\"个人简介\",\"required\":true,\"type\":\"string\"},{\"field\":\"history\",\"name\":\"历史记录\",\"required\":false,\"type\":\"string[]\"},{\"field\":\"profile\",\"name\":\"基础信息\",\"required\":true,\"type\":\"string\"}]}');

-- -author:chenrui---date:2025/8/11-----for:[QQYUN-13400]删除废弃菜单---
delete from sys_permission where id = '1948206070361595906';
delete from sys_permission where id = '1948205626927194114';

-- -author:chenrui---date:2025/8/13-----for:[QQYUN-13394]优化，开源版本的账号都是错误的，用户不知道需要配置自己的账号---
-- 添加激活字段
ALTER TABLE `airag_model`
ADD COLUMN `activate_flag` int NULL COMMENT '是否激活（1=是，0=否）' AFTER `model_params`;
-- 更新历史数据值
update airag_model set activate_flag = 0 ;



-- ---author:chenrui---date:20250818-----for:更新生成简历提示词,确保生成的json可以被解析
UPDATE `airag_flow` SET `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    llm.tag(\'215734195065536512\'),\n    enhanceJava.tag(\'215740280715427840\'),\n    end.tag(\'215735188368998400\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":300,\"y\":404,\"properties\":{\"text\":\"开始\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"content\",\"name\":\"个人简介\",\"type\":\"string\",\"required\":true},{\"field\":\"history\",\"name\":\"历史记录\",\"type\":\"string[]\",\"required\":false},{\"field\":\"profile\",\"name\":\"基础信息\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"215734195065536512\",\"type\":\"llm\",\"x\":739,\"y\":406,\"properties\":{\"text\":\"LLM\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"你必须只输出合法且可被 JSON.parse() 正确解析的 JSON。\\n不要输出任何解释、注释或 JSON 以外的文字。\\n\\n\\nJSON 结构规则：\\n- 每个对象表示一个内容块。\\n- 字段说明：\\n • \\\"type\\\"：内容类型，可选：\\\"title\\\"（标题）、\\\"list\\\"（列表）、\\\"separator\\\"（分隔线）、\\\"hyperlink\\\"（超链接）、\\\"pageBreak\\\"（分页符）、\\\"tab\\\"（制表符）、\\\"\\\"（普通文本）、\\\"superscript\\\"（上标）、\\\"subscript\\\"（下标）、\\\"table\\\"（表格）。\\n • \\\"level\\\"：标题层级，仅当 type 为 \\\"title\\\" 时使用，取值：\\\"first\\\" ~ \\\"sixth\\\"。\\n • \\\"value\\\"：文本、图片地址、超链接等。\\n • \\\"valueList\\\"：数组，用于标题、列表、超链接等，数组元素支持 \\\"value\\\" 及样式字段。\\n • \\\"listType\\\"：列表类型，取值：\\\"ul\\\"（无序）、\\\"ol\\\"（有序）。\\n • \\\"listStyle\\\"：列表样式，如 \\\"disc\\\"、\\\"decimal\\\"、\\\"circle\\\"、\\\"square\\\"、\\\"checkbox\\\"。\\n • \\\"trList\\\"、\\\"colgroup\\\"：表格行列定义，仅用于 \\\"table\\\"。\\n • 样式字段：\\\"font\\\"、\\\"size\\\"、\\\"bold\\\"、\\\"color\\\"、\\\"italic\\\"、\\\"highlight\\\"、\\\"underline\\\"、\\\"strikeout\\\"。\\n • \\\"dashArray\\\"：用于 \\\"separator\\\"。\\n • 其他样式字段：\\\"rowFlex\\\"（\\\"left\\\"、\\\"center\\\"、\\\"right\\\"、\\\"alignment\\\"）、\\\"backgroundColor\\\"、\\\"verticalAlign\\\"、\\\"textDecoration\\\"。\\n- 当 type = \\\"title\\\" 时，\\\"value\\\" 必须以 \\\"\\\\n\\\" 结尾。\\n- 主动换行请使用 `{ \\\"type\\\": \\\"\\\", \\\"value\\\": \\\"\\\\n\\\" }`，不同对象之间不会自动换行。\\n- 所有键名和字符串必须使用英文双引号 `\\\"`。\\n\\n\\n输出必须严格是 JSON 数组，例如：\\n[\\n {\\n  \\\"type\\\": \\\"title\\\",\\n  \\\"level\\\": \\\"first\\\",\\n  \\\"valueList\\\": [{ \\\"value\\\": \\\"主标题示例\\\\n\\\", \\\"font\\\": \\\"微软雅黑\\\", \\\"size\\\": 26, \\\"bold\\\": true, \\\"rowFlex\\\": \\\"center\\\" }]\\n },\\n { \\\"type\\\": \\\"\\\", \\\"value\\\": \\\"普通文本内容示例\\\" },\\n {\\n  \\\"type\\\": \\\"list\\\",\\n  \\\"listType\\\": \\\"ul\\\",\\n  \\\"listStyle\\\": \\\"disc\\\",\\n  \\\"valueList\\\": [\\n   { \\\"value\\\": \\\"列表项1\\\" },\\n   { \\\"value\\\": \\\"列表项2\\\" }\\n  ]\\n }\\n]\"},{\"role\":\"user\",\"content\":\"请根据以上字段和示例，生成一个完整的个人简历文档 JSON。\\n- 至少包含基础信息、个人优势、工作经历、项目经理、教育经历等模块。\\n- 若基础数据不足，可以适当生成参考数据。\\n- 用户信息如下：\\n基础资料：{{base}}\\n简介：{{profile}}\"}]},\"inputParams\":[{\"field\":\"profile\",\"name\":\"base\",\"nodeId\":\"start-node\"},{\"field\":\"content\",\"name\":\"profile\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"215735188368998400\",\"type\":\"end\",\"x\":1577,\"y\":354,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"result\",\"name\":\"resp\",\"nodeId\":\"215740280715427840\"}],\"height\":114,\"width\":332}},{\"id\":\"215740280715427840\",\"type\":\"enhanceJava\",\"x\":1156,\"y\":352,\"properties\":{\"text\":\"Java 增强\",\"options\":{\"enhance\":{\"type\":\"spring\",\"path\":\"jeecgDemoAiWordGen\"}},\"inputParams\":[{\"field\":\"text\",\"name\":\"resp\",\"nodeId\":\"215734195065536512\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"返回结果\",\"type\":\"string\"}],\"height\":180,\"width\":332}}],\"edges\":[{\"id\":\"215734195073925120\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"215734195065536512\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"215734195065536512_input\",\"pointsList\":[{\"x\":466,\"y\":389},{\"x\":566,\"y\":389},{\"x\":473,\"y\":347},{\"x\":573,\"y\":347}]},{\"id\":\"215740280719622144\",\"type\":\"base-edge\",\"sourceNodeId\":\"215734195065536512\",\"targetNodeId\":\"215740280715427840\",\"sourceAnchorId\":\"215734195065536512_output\",\"targetAnchorId\":\"215740280715427840_input\",\"pointsList\":[{\"x\":905,\"y\":347},{\"x\":1005,\"y\":347},{\"x\":890,\"y\":293},{\"x\":990,\"y\":293}]},{\"id\":\"215740398487289856\",\"type\":\"base-edge\",\"sourceNodeId\":\"215740280715427840\",\"targetNodeId\":\"215735188368998400\",\"sourceAnchorId\":\"215740280715427840_output\",\"targetAnchorId\":\"215735188368998400_input\",\"pointsList\":[{\"x\":1322,\"y\":293},{\"x\":1422,\"y\":293},{\"x\":1311,\"y\":328},{\"x\":1411,\"y\":328}]}]}', `status` = 'enable', `metadata` = '{\"outputs\":[{\"field\":\"result\",\"name\":\"resp\",\"nodeId\":\"215740280715427840\"}],\"inputs\":[{\"field\":\"content\",\"name\":\"个人简介\",\"required\":true,\"type\":\"string\"},{\"field\":\"history\",\"name\":\"历史记录\",\"required\":false,\"type\":\"string[]\"},{\"field\":\"profile\",\"name\":\"基础信息\",\"required\":true,\"type\":\"string\"}]}' WHERE `id` = '1952634605517447170';

-- ---author:wangshuai---date:20250820-----for:【QQYUN-13421】扩展职务加职务等级：修改原来职务字段
ALTER TABLE `sys_position`
CHANGE COLUMN `post_rank` `post_level` int(2) NULL DEFAULT NULL COMMENT '职务等级' AFTER `name`;

-- ---author:wangshuai---date:20250820-----for:【QQYUN-13426】部门表新增职级和上级岗位字段
-- 修改字典部门类型
UPDATE `sys_dict` SET  `description` = '机构类型 1公司，2部门，3岗位，4子公司' WHERE `id` = '1174511106530525185';
INSERT INTO `sys_dict_item` (`id`, `dict_id`, `item_text`, `item_value`, `description`, `sort_order`, `status`, `create_by`, `create_time`, `update_by`, `update_time`, `item_color`) VALUES ('1955230463631126529', '1174511106530525185', '子公司', '4', NULL, 1, 1, 'admin', '2025-08-12 19:30:44', NULL, NULL, NULL);

-- 部门表新增职级和上级岗位字段
ALTER TABLE `sys_depart`
MODIFY COLUMN `org_category` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '1' COMMENT '机构类别 1公司，2部门，3岗位，4子公司' AFTER `description`,
ADD COLUMN `position_id` varchar(32) NULL COMMENT '职级id' AFTER `iz_leaf`,
ADD COLUMN `dep_post_parent_id` varchar(32) NULL COMMENT '上级岗位id' AFTER `position_id`,
ADD INDEX `idx_sd_position_id`(`position_id`) USING BTREE,
ADD INDEX `idx_sd_dep_post_parent_id`(`dep_post_parent_id`) USING BTREE;

-- author:wangshuai---date:20250820--for: 【QQYUN-13422】【用户管理】添加字段 主岗位 兼职岗位 取消职务 ---

-- 用户表新增岗位和兼职岗位字段
ALTER TABLE `sys_user`
ADD COLUMN `main_dep_post_id` varchar(32) NULL COMMENT '主岗位（部门岗位id）' AFTER `sign`,
ADD COLUMN `other_dep_post_id` varchar(1000) NULL COMMENT '兼职岗位(部门岗位id)' AFTER `main_dep_post_id`,
ADD INDEX `idx_su_main_dep_post_id`(`main_dep_post_id`) USING BTREE,
ADD INDEX `idx_su_other_dep_post_id`(`other_dep_post_id`) USING BTREE;

-- author:wangshuai---date:20250821-for: 初始化职务数据及新增部门数据 ---

-- 职务默认数据
delete from sys_position;

INSERT INTO `sys_position` (`id`, `code`, `name`, `post_level`, `company_id`, `create_by`, `create_time`, `update_by`, `update_time`, `sys_org_code`, `tenant_id`) VALUES ('1958470823064436737', '5za8WqucKR', '职员', 6, NULL, 'admin', '2025-08-21 18:06:46', NULL, NULL, 'A01A08', 0);
INSERT INTO `sys_position` (`id`, `code`, `name`, `post_level`, `company_id`, `create_by`, `create_time`, `update_by`, `update_time`, `sys_org_code`, `tenant_id`) VALUES ('1958470865577902082', 'hGAuYslALj', '副部长', 5, NULL, 'admin', '2025-08-21 18:06:56', NULL, NULL, 'A01A08', 0);
INSERT INTO `sys_position` (`id`, `code`, `name`, `post_level`, `company_id`, `create_by`, `create_time`, `update_by`, `update_time`, `sys_org_code`, `tenant_id`) VALUES ('1958470912214368258', 'M0xkqpPsg7', '部长', 4, NULL, 'admin', '2025-08-21 18:07:07', NULL, NULL, 'A01A08', 0);
INSERT INTO `sys_position` (`id`, `code`, `name`, `post_level`, `company_id`, `create_by`, `create_time`, `update_by`, `update_time`, `sys_org_code`, `tenant_id`) VALUES ('1958471030867034113', 'npEbkFq6Uw', '副总经理', 3, NULL, 'admin', '2025-08-21 18:07:35', NULL, NULL, 'A01A08', 0);
INSERT INTO `sys_position` (`id`, `code`, `name`, `post_level`, `company_id`, `create_by`, `create_time`, `update_by`, `update_time`, `sys_org_code`, `tenant_id`) VALUES ('1958471074953363458', 'DEPMkWRJEu', '总经理', 2, NULL, 'admin', '2025-08-21 18:07:46', NULL, NULL, 'A01A08', 0);
INSERT INTO `sys_position` (`id`, `code`, `name`, `post_level`, `company_id`, `create_by`, `create_time`, `update_by`, `update_time`, `sys_org_code`, `tenant_id`) VALUES ('1958471111989067778', 'gu7Rbffh0L', '董事长', 1, NULL, 'admin', '2025-08-21 18:07:54', NULL, NULL, 'A01A08', 0);

-- 新增部门数据
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958496243038556161', '', '控股集团', NULL, NULL, 0, NULL, '1', '1', 'A05', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:47:48', NULL, NULL, 0, 0, NULL, NULL);
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958496444470005762', '1958496243038556161', '投资控股集团有限公司', NULL, NULL, 0, NULL, '4', '2', 'A05A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:48:34', 'admin', '2025-08-21 19:49:57', 0, 0, NULL, '');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958496759810363394', '1958496243038556161', '城市运营管理集团有限公司', NULL, NULL, 1, NULL, '4', '2', 'A05A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:49:49', 'admin', '2025-08-21 20:30:23', 0, 0, NULL, '');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958496836318662658', '1958496444470005762', '领导班子', NULL, NULL, 0, NULL, '2', '3', 'A05A01A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:50:08', NULL, NULL, 0, 0, NULL, NULL);
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958496891561840641', '1958496444470005762', '办公室', NULL, NULL, 2, NULL, '2', '3', 'A05A01A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:50:21', 'admin', '2025-08-21 19:50:36', 0, 0, NULL, '');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958496943017562114', '1958496444470005762', '财务管理中心', NULL, NULL, 3, NULL, '2', '3', 'A05A01A03', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:50:33', NULL, NULL, 0, 0, NULL, NULL);
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958497020528300033', '1958496444470005762', '投资发展部', NULL, NULL, 4, NULL, '2', '3', 'A05A01A04', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:50:51', NULL, NULL, 0, 0, NULL, NULL);
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958497164103520258', '1958496836318662658', '董事长', NULL, NULL, 0, NULL, '3', '4', 'A05A01A01A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:51:26', NULL, NULL, 0, 1, '1958471111989067778', '');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958497256772472834', '1958496836318662658', '党委书记', NULL, NULL, 1, NULL, '3', '4', 'A05A01A01A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:51:48', 'admin', '2025-08-21 19:54:53', 0, 1, '1958471030867034113', '1958497164103520258');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958497591230468098', '1958496836318662658', '控股总经理', NULL, NULL, 3, NULL, '3', '4', 'A05A01A01A03', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:53:08', 'admin', '2025-08-21 19:54:42', 0, 1, '1958471074953363458', '1958497164103520258');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958497769387724802', '1958496836318662658', '纪委书记', NULL, NULL, 4, NULL, '3', '4', 'A05A01A01A04', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:53:50', 'admin', '2025-08-21 19:54:06', 0, 1, '1958471030867034113', '1958497591230468098');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958498187287203841', '1958496891561840641', '控股办公室主任', NULL, NULL, 1, NULL, '3', '4', 'A05A01A02A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:55:30', 'admin', '2025-08-21 19:55:50', 0, 1, '1958470912214368258', '1958497164103520258');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958498716927135745', '1958496891561840641', '副主任', NULL, NULL, 2, NULL, '3', '4', 'A05A01A02A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 19:57:36', 'admin', '2025-08-21 19:57:50', 0, 1, '1958470865577902082', '1958498187287203841');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958502219078733826', '1958496891561840641', '职员', NULL, NULL, 3, NULL, '3', '4', 'A05A01A02A03', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:11:31', NULL, NULL, 0, 1, '1958470823064436737', '1958498187287203841');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958502381062754305', '1958496943017562114', '主任', NULL, NULL, 1, NULL, '3', '4', 'A05A01A03A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:12:10', 'admin', '2025-08-21 20:13:13', 0, 1, '1958470912214368258', '1958502611426512898');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958502611426512898', '1958496836318662658', '控股副总经理', NULL, NULL, 5, NULL, '3', '4', 'A05A01A01A05', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:13:04', 'admin', '2025-08-21 20:27:14', 0, 1, '1958471030867034113', '1958497591230468098');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958502810966331393', '1958496943017562114', '副主任', NULL, NULL, 2, NULL, '3', '4', 'A05A01A03A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:13:52', 'admin', '2025-08-21 20:14:40', 0, 1, '1958470865577902082', '1958502381062754305');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958502942289989634', '1958496943017562114', '职员', NULL, NULL, 2, NULL, '3', '4', 'A05A01A03A03', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:14:23', 'admin', '2025-08-21 20:14:28', 0, 1, '1958470823064436737', '1958502810966331393');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958503159999533057', '1958497020528300033', '部长', NULL, NULL, 1, NULL, '3', '4', 'A05A01A04A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:15:15', NULL, NULL, 0, 1, '1958470912214368258', '1958502611426512898');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958503409933914114', '1958497020528300033', '副部长', NULL, NULL, 2, NULL, '3', '4', 'A05A01A04A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:16:15', NULL, NULL, 0, 1, '1958470865577902082', '1958503159999533057');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958503468805165058', '1958497020528300033', '员工', NULL, NULL, 3, NULL, '3', '4', 'A05A01A04A03', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:16:29', NULL, NULL, 0, 1, '1958470823064436737', '1958503409933914114');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958507136782733313', '1958496759810363394', '领导班子', NULL, NULL, 1, NULL, '2', '3', 'A05A02A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:31:03', NULL, NULL, 0, 0, NULL, NULL);
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958507356253884418', '1958496759810363394', '信息技术发展有限公司', NULL, NULL, 4, NULL, '4', '3', 'A05A02A03', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:31:56', 'admin', '2025-08-21 21:12:57', 0, 0, NULL, '');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958507448138502146', '1958507136782733313', '董事长', NULL, NULL, 1, NULL, '3', '4', 'A05A02A01A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:32:18', 'admin', '2025-08-21 20:33:24', 0, 1, '1958471111989067778', '');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958507542866857985', '1958507136782733313', '副总经理', NULL, NULL, 3, NULL, '3', '4', 'A05A02A01A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:32:40', 'admin', '2025-08-21 20:33:26', 0, 1, '1958471030867034113', '');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958507650828242946', '1958507136782733313', '总经理', NULL, NULL, 2, NULL, '3', '4', 'A05A02A01A03', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 20:33:06', 'admin', '2025-08-21 20:33:20', 0, 1, '1958471074953363458', '');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958518943542972418', '1958507356253884418', '领导班子', NULL, NULL, 1, NULL, '2', '4', 'A05A02A03A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:17:58', NULL, NULL, 0, 0, NULL, NULL);
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958519010207240193', '1958507356253884418', '综合管理部', NULL, NULL, 2, NULL, '2', '4', 'A05A02A03A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:18:14', NULL, NULL, 0, 0, NULL, NULL);
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958519045623943169', '1958507356253884418', '财务部', NULL, NULL, 3, NULL, '2', '4', 'A05A02A03A03', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:18:23', NULL, NULL, 0, 0, NULL, NULL);
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958519097058693121', '1958507356253884418', '软件研发部', NULL, NULL, 4, NULL, '2', '4', 'A05A02A03A04', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:18:35', NULL, NULL, 0, 0, NULL, NULL);
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958520331257810945', '1958496891561840641', '总工程师', NULL, NULL, 2, NULL, '3', '4', 'A05A01A02A04', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:23:29', 'admin', '2025-08-21 21:23:52', 0, 1, '1958471030867034113', '1958497164103520258');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958520788395003906', '1958496759810363394', '办公室', NULL, NULL, 2, NULL, '2', '3', 'A05A02A04', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:25:18', 'admin', '2025-08-21 21:26:51', 0, 0, NULL, '');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958520876810932225', '1958520788395003906', '总工程师', NULL, NULL, 1, NULL, '3', '4', 'A05A02A04A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:25:39', 'admin', '2025-08-21 21:26:25', 0, 1, '1958471030867034113', '1958507650828242946');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958521034948775937', '1958518943542972418', '执行董事兼总经理', NULL, NULL, 1, NULL, '3', '5', 'A05A02A03A01A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:26:17', NULL, NULL, 0, 1, '1958471111989067778', '1958520876810932225');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958521513564999681', '1958518943542972418', '副总经理', NULL, NULL, 2, NULL, '3', '5', 'A05A02A03A01A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:28:11', NULL, NULL, 0, 1, '1958471030867034113', '1958521034948775937');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958521634549698561', '1958519010207240193', '副部长', NULL, NULL, 1, NULL, '3', '5', 'A05A02A03A02A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:28:40', 'admin', '2025-08-21 21:30:15', 0, 1, '1958470865577902082', '1958521034948775937');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958523766002716674', '1958519010207240193', '信息归档员', NULL, NULL, 2, NULL, '3', '5', 'A05A02A03A02A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:37:08', NULL, NULL, 0, 1, '1958470823064436737', '1958521634549698561');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958524282631917570', '1958519045623943169', '部长', NULL, NULL, 1, NULL, '3', '5', 'A05A02A03A03A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:39:11', NULL, NULL, 0, 1, '1958470912214368258', '1958521034948775937');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958524369311404033', '1958519045623943169', '出纳', NULL, NULL, 2, NULL, '3', '5', 'A05A02A03A03A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:39:32', NULL, NULL, 0, 1, '1958470823064436737', '1958524282631917570');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958524471841165313', '1958519097058693121', '项目经理', NULL, NULL, 1, NULL, '3', '5', 'A05A02A03A04A01', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:39:56', NULL, NULL, 0, 1, '1958470912214368258', '1958521513564999681');
INSERT INTO `sys_depart` (`id`, `parent_id`, `depart_name`, `depart_name_en`, `depart_name_abbr`, `depart_order`, `description`, `org_category`, `org_type`, `org_code`, `mobile`, `fax`, `address`, `memo`, `status`, `del_flag`, `qywx_identifier`, `ding_identifier`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`, `iz_leaf`, `position_id`, `dep_post_parent_id`) VALUES ('1958524565596442626', '1958519097058693121', '软件工程师', NULL, NULL, 2, NULL, '3', '5', 'A05A02A03A04A02', NULL, NULL, NULL, NULL, NULL, '0', NULL, NULL, 'admin', '2025-08-21 21:40:19', NULL, NULL, 0, 1, '1958470823064436737', '1958524471841165313');


-- ---author:scott---date:20250824-----for: 修改部门表字段注释说明
ALTER TABLE `sys_depart`
    MODIFY COLUMN `org_type` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '树深度层级level' AFTER `org_category`;
    
-- --author:liusq---date:20250827-----for: 删除代理配置菜单
DELETE FROM sys_permission WHERE id = "1948648516302536706";
DELETE FROM sys_role_permission WHERE permission_id = "1948648516302536706";

-- ---author:scott---date:20250827-----for:[QQYUN-13516]有时通过AI生成简历，解析json报错
UPDATE `airag_flow` SET `application_name` = 'jeecg', `name` = '示例_AI生成在线简历', `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    llm.tag(\'215734195065536512\'),\n    enhanceJava.tag(\'215740280715427840\'),\n    end.tag(\'215735188368998400\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":300,\"y\":404,\"properties\":{\"text\":\"开始\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"content\",\"name\":\"个人简介\",\"type\":\"string\",\"required\":true},{\"field\":\"history\",\"name\":\"历史记录\",\"type\":\"string[]\",\"required\":false},{\"field\":\"profile\",\"name\":\"基础信息\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"215734195065536512\",\"type\":\"llm\",\"x\":739,\"y\":406,\"properties\":{\"text\":\"LLM\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"你必须只输出合法且可被 JSON.parse() 正确解析的 JSON。\\n不要输出任何解释、注释或 JSON 以外的文字。\\n\\n\\nJSON 结构规则：\\n- 每个对象表示一个内容块。\\n- 字段说明：\\n• \\\"type\\\"：内容类型，可选：\\\"title\\\"（标题）、\\\"list\\\"（列表）、\\\"separator\\\"（分隔线）、\\\"hyperlink\\\"（超链接）、\\\"pageBreak\\\"（分页符）、\\\"tab\\\"（制表符）、\\\"\\\"（普通文本）、\\\"superscript\\\"（上标）、\\\"subscript\\\"（下标）、\\\"table\\\"（表格）。\\n• \\\"level\\\"：标题层级，仅当 type 为 \\\"title\\\" 时使用，取值：\\\"first\\\" ~ \\\"sixth\\\"。\\n• \\\"value\\\"：文本、图片地址、超链接等。\\n• \\\"valueList\\\"：数组，用于标题、列表、超链接等，数组元素支持 \\\"value\\\" 及样式字段。\\n• \\\"listType\\\"：列表类型，取值：\\\"ul\\\"（无序）、\\\"ol\\\"（有序）。\\n• \\\"listStyle\\\"：列表样式，如 \\\"disc\\\"、\\\"decimal\\\"、\\\"circle\\\"、\\\"square\\\"、\\\"checkbox\\\"。\\n• \\\"trList\\\"、\\\"colgroup\\\"：表格行列定义，仅用于 \\\"table\\\"。\\n• 样式字段：\\\"font\\\"、\\\"size\\\"、\\\"bold\\\"、\\\"color\\\"、\\\"italic\\\"、\\\"highlight\\\"、\\\"underline\\\"、\\\"strikeout\\\"。\\n• \\\"dashArray\\\"：用于 \\\"separator\\\"。\\n• 其他样式字段：\\\"rowFlex\\\"（\\\"left\\\"、\\\"center\\\"、\\\"right\\\"、\\\"alignment\\\"）、\\\"backgroundColor\\\"、\\\"verticalAlign\\\"、\\\"textDecoration\\\"。\\n- 当 type = \\\"title\\\" 时，\\\"value\\\" 必须以 \\\"\\\\n\\\" 结尾。\\n- 主动换行请使用 `{ \\\"type\\\": \\\"\\\", \\\"value\\\": \\\"\\\\n\\\" }`，不同对象之间不会自动换行。\\n- 所有键名和字符串必须使用英文双引号 `\\\"`。\\n\\n\\n输出必须严格是 JSON 数组，例如：\\n[\\n{\\n\\\"type\\\": \\\"title\\\",\\n\\\"level\\\": \\\"first\\\",\\n\\\"valueList\\\": [{ \\\"value\\\": \\\"主标题示例\\\\n\\\", \\\"font\\\": \\\"微软雅黑\\\", \\\"size\\\": 26, \\\"bold\\\": true, \\\"rowFlex\\\": \\\"center\\\" }]\\n},\\n{ \\\"type\\\": \\\"\\\", \\\"value\\\": \\\"普通文本内容示例\\\" },\\n{\\n\\\"type\\\": \\\"list\\\",\\n\\\"listType\\\": \\\"ul\\\",\\n\\\"listStyle\\\": \\\"disc\\\",\\n\\\"valueList\\\": [\\n{ \\\"value\\\": \\\"列表项1\\\" },\\n{ \\\"value\\\": \\\"列表项2\\\" }\\n]\\n}\\n]\\n\\n\\n执行步骤：\\n1. 根据用户需求生成json数据\\n2. 检查生产的json数据是否正确。如果正常，输出给用户；否则重新生成。\"},{\"role\":\"user\",\"content\":\"请根据以上字段和示例，生成一个完整的个人简历文档 JSON。\\n- 至少包含基础信息、个人优势、工作经历、项目经理、教育经历等模块。\\n- 若基础数据不足，可以适当生成参考数据。\\n- 用户信息如下：\\n基础资料：{{base}}\\n简介：{{profile}}\"}]},\"inputParams\":[{\"field\":\"profile\",\"name\":\"base\",\"nodeId\":\"start-node\"},{\"field\":\"content\",\"name\":\"profile\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"215735188368998400\",\"type\":\"end\",\"x\":1577,\"y\":354,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"result\",\"name\":\"resp\",\"nodeId\":\"215740280715427840\"}],\"height\":114,\"width\":332}},{\"id\":\"215740280715427840\",\"type\":\"enhanceJava\",\"x\":1156,\"y\":352,\"properties\":{\"text\":\"Java 增强\",\"options\":{\"enhance\":{\"type\":\"spring\",\"path\":\"jeecgDemoAiWordGen\"}},\"inputParams\":[{\"field\":\"text\",\"name\":\"resp\",\"nodeId\":\"215734195065536512\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"返回结果\",\"type\":\"string\"}],\"height\":180,\"width\":332}}],\"edges\":[{\"id\":\"215734195073925120\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"215734195065536512\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"215734195065536512_input\",\"pointsList\":[{\"x\":466,\"y\":389},{\"x\":566,\"y\":389},{\"x\":473,\"y\":347},{\"x\":573,\"y\":347}]},{\"id\":\"215740280719622144\",\"type\":\"base-edge\",\"sourceNodeId\":\"215734195065536512\",\"targetNodeId\":\"215740280715427840\",\"sourceAnchorId\":\"215734195065536512_output\",\"targetAnchorId\":\"215740280715427840_input\",\"pointsList\":[{\"x\":905,\"y\":347},{\"x\":1005,\"y\":347},{\"x\":890,\"y\":293},{\"x\":990,\"y\":293}]},{\"id\":\"215740398487289856\",\"type\":\"base-edge\",\"sourceNodeId\":\"215740280715427840\",\"targetNodeId\":\"215735188368998400\",\"sourceAnchorId\":\"215740280715427840_output\",\"targetAnchorId\":\"215735188368998400_input\",\"pointsList\":[{\"x\":1322,\"y\":293},{\"x\":1422,\"y\":293},{\"x\":1311,\"y\":328},{\"x\":1411,\"y\":328}]}]}', `status` = 'enable', `metadata` = '{\"outputs\":[{\"field\":\"result\",\"name\":\"resp\",\"nodeId\":\"215740280715427840\"}],\"inputs\":[{\"field\":\"content\",\"name\":\"个人简介\",\"required\":true,\"type\":\"string\"},{\"field\":\"history\",\"name\":\"历史记录\",\"required\":false,\"type\":\"string[]\"},{\"field\":\"profile\",\"name\":\"基础信息\",\"required\":true,\"type\":\"string\"}]}' WHERE `id` = '1952634605517447170';

-- ---author:chenrui---date:20250828-----for:【QQYUN-13449】 AI加使用辅助引导（目前有这功能，用户也不会用）
UPDATE `airag_flow` SET `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    SWITCH(switch.tag(\'173365501230346240\')).to(\n        THEN(\n            llm.tag(\'172956395755208704\'),\n            end.tag(\'172957153284259840\')\n        ).tag(\"172956395755208704\"),\n        THEN(\n            llm.tag(\'173365800833675264\'),\n            end.tag(\'173366253646540800\')\n        ).tag(\"173365800833675264\"),\n        end.tag(\'173366439085109248\'),\n        THEN(\n            llm.tag(\'175149164433014784\'),\n            end.tag(\'175153953988444160\')\n        ).tag(\"175149164433014784\"),\n        THEN(\n            llm.tag(\'175505963485245440\'),\n            end.tag(\'175506006644633600\')\n        ).tag(\"175505963485245440\"),\n        THEN(\n            llm.tag(\'175807569594040320\'),\n            end.tag(\'175808663015538688\')\n        ).tag(\"175807569594040320\"),\n        THEN(\n            llm.tag(\'221504502491222016\'),\n            end.tag(\'221512800426758144\')\n        ).tag(\"221504502491222016\"),\n        THEN(\n            llm.tag(\'223992240450801664\'),\n            end.tag(\'223993058876952576\')\n        ).tag(\"223992240450801664\")\n    ).tag(\'173365501230346240\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":262,\"y\":458,\"properties\":{\"text\":\"开始\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"content\",\"name\":\"用户问题\",\"type\":\"string\",\"required\":true},{\"field\":\"history\",\"name\":\"历史记录\",\"type\":\"string[]\",\"required\":false},{\"field\":\"ddl\",\"name\":\"表结构\",\"type\":\"string\",\"required\":true},{\"field\":\"dbtype\",\"name\":\"数据库类型\",\"type\":\"string\",\"required\":true},{\"field\":\"bizType\",\"name\":\"业务类型\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"172956395755208704\",\"type\":\"llm\",\"x\":1166,\"y\":160,\"properties\":{\"text\":\"生成sql\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"# 角色：SQL生成助手\\n你是一个专业的SQL语句生成工具，能够根据用户提供的描述和表结构自动生成高效的SQL查询语句。\\n\\n## 目标：\\n- 根据用户的描述生成准确的SQL查询语句。\\n\\n## 技能：\\n1. 理解用户提供的需求和表结构。\\n2. 自动构建符合SQL语法的查询语句。\\n3. 优化生成的SQL以提高执行效率。\\n\\n## 工作流：\\n1. 接收用户描述和表结构信息。\\n2. 分析用户需求，确定所需的SQL操作类型（如查询、插入、更新、删除）。\\n3. 根据分析结果生成相应的SQL语句。\\n\\n## 输出格式：\\n- 生成的SQL语句应为标准格式，如：SELECT * FROM table_name ;\\n- 将输出的SQL语句格式化\\n- 只输出sql语句，不要额外解释，不要md语法，不要换行符，不要有sql注释。\\n\\n## 限制：\\n\\n- 除非明确说明，否则不要生成查询条件\\n- 确保生成的SQL语句符合数据库的语法要求，确保sql能直接执行。\\n- 确保字段和表能正确对应。\"},{\"role\":\"user\",\"content\":\"表结构：\\n{{ddl}}\\n---------\\n数据库类型：\\n{{dbtype}}\\n----------\\n需求：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"},{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"},{\"field\":\"dbtype\",\"name\":\"dbtype\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"172957153284259840\",\"type\":\"end\",\"x\":1643,\"y\":129,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"sql\",\"nodeId\":\"172956395755208704\"}],\"height\":114,\"width\":332}},{\"id\":\"173365501230346240\",\"type\":\"switch\",\"x\":688,\"y\":575,\"properties\":{\"text\":\"条件分支\",\"options\":{\"if\":[{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"genSql\"}],\"next\":\"172956395755208704\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"genJsonRows\"}],\"next\":\"173365800833675264\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"chooseTables\"}],\"next\":\"175149164433014784\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"genChart\"}],\"next\":\"175505963485245440\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"intentCheck\"}],\"next\":\"175807569594040320\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"designReport\"}],\"next\":\"221504502491222016\"},{\"logic\":\"AND\",\"conditions\":[{\"nodeId\":\"start-node\",\"field\":\"bizType\",\"operator\":\"EQUALS\",\"value\":\"genPrompt\"}],\"next\":\"223992240450801664\"}],\"else\":{\"next\":\"173366439085109248\"}},\"inputParams\":[],\"outputParams\":[{\"field\":\"index\",\"name\":\"分支索引\",\"type\":\"number\"}],\"height\":274,\"width\":332}},{\"id\":\"173365800833675264\",\"type\":\"llm\",\"x\":1167,\"y\":368,\"properties\":{\"text\":\"生成rows\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"你是一个 **“在线报表 JSON 生成器”**，能够理解用户描述及数据集，并生成符合规范的 **合法 JSON**。  \\n\\n\\n---\\n\\n\\n## 工作流程\\n\\n\\n### 步骤一：数据集选择  \\n1. 读取用户提供的数据集结构。  \\n2. 根据需求从中选定一个数据集。  \\n3. 后续只能使用选定数据集的字段。  \\n\\n\\n### 步骤二：报表设计  \\n根据用户需求与数据集，输出报表的结构信息：  \\n- 行号、列号（从0开始）  \\n- 单元格内容（文字或数据集占位符）  \\n- 单元格样式（引用样式索引）  \\n- 合并单元格信息  \\n\\n\\n### 步骤三：生成报表 JSON  \\n使用步骤二的描述生成完整 JSON。  \\n\\n\\n---\\n\\n\\n## 输出要求\\n1. **输出必须是合法 JSON**，能直接 `JSON.parse()`。  \\n2. 必须包含以下部分：  \\n   - `\\\"styles\\\"`：样式数组，每种样式单独定义，在单元格中用索引引用。  \\n   - `\\\"merges\\\"`：合并单元格范围（如 `\\\"D3:E4\\\"`）。  \\n   - `\\\"rows\\\"`：行数据，每行包含 `cells`，每个 `cell` 可有：  \\n     - `\\\"text\\\"`：文字或占位符（`${}` 对象，`#{}` 集合）  \\n     - `\\\"style\\\"`：引用 `styles` 索引  \\n     - `\\\"merge\\\"`：合并范围 `[纵向合并格数, 横向合并格数]`  \\n     - `\\\"height\\\"`：行高  \\n   - `\\\"cols\\\"`：列宽配置  \\n\\n\\n---\\n\\n\\n## 样式规则\\n- 样式在 `\\\"styles\\\"` 中定义：  \\n  - `font`：字体\\n    - `bold`: 是否加粗（如：`true`）\\n    - `italic`: 是否斜体（如：`true`）\\n    - `size`: 字体大小单位pt,默认10\\n  - `underline`: 下划线（如：`true`）\\n  - `strike`: 删除线（如：`true`）\\n  - `color`（字体颜色）  \\n  - `bgcolor`（背景色）  \\n  - `align`（left/center/right）  \\n  - `valign`（top/middle/bottom）  \\n  - `textwrap`（自动换行）  \\n  - `border`\\n    - `top`：上边框（如 `[\\\"thin\\\",\\\"#000\\\"]`）  \\n    - `bottom`：下边框（如 `[\\\"thin\\\",\\\"#000\\\"]`）  \\n    - `left`：左边框（如 `[\\\"thin\\\",\\\"#000\\\"]`）  \\n    - `right`：右边框（如 `[\\\"thin\\\",\\\"#000\\\"]`）  \\n\\n\\n---\\n\\n\\n## 数据集规则\\n示例：\\n```json\\n{\\n  \\\"code\\\": \\\"a\\\",\\n  \\\"title\\\": \\\"a\\\",\\n  \\\"isList\\\": \\\"1\\\",\\n  \\\"children\\\": [\\n    { \\\"title\\\": \\\"total_sales\\\", \\\"fieldText\\\": \\\"总销量\\\" },\\n    { \\\"title\\\": \\\"total_returns\\\", \\\"fieldText\\\": \\\"总退货数量\\\" }\\n  ]\\n}\\n```\\n- `code`：数据集变量名  \\n- `isList = 1`：集合  \\n- `isList = 0`：对象  \\n- `children`：字段，含 `title`（字段名）、`fieldText`（展示名）  \\n\\n\\n---\\n\\n\\n## 行列与填充规则\\n- 行号、列号从0开始。  \\n- `\\\"cols\\\"` 设置列宽。  \\n- **集合 (`isList=1`)**：  \\n  - 一行字段标题（children.fieldText）  \\n  - 下一行字段占位符（`#{code.title}`）  \\n- **对象 (`isList=0`)**：  \\n  - 每字段占两列：左列为标题，右列为占位符 `${code.title}`  \\n  - 可按组横向排列  \\n\\n\\n---\\n\\n\\n## 合并规则\\n- `\\\"merge\\\": [纵向合并格数, 横向合并格数]`  \\n  - 纵向合并格数与横向合并格数是不包含当前单元格的数量（如 纵向合并格数 等于1 就是向下合并一行；横向合并格数同理）\\n- 被合并覆盖的单元格无需再定义  \\n\\n\\n---\\n\\n\\n## 特别说明\\n- JSON 必须 **纯净**：无注释、无 markdown、无省略号。  \\n- 用户指定的样式不能改动，可在此基础上做美化。\\n- 除非用户明确要求，默认都对生成的报表做基础美化（如增加边框、设置字体、设置背景色）\\n- 用户描述的行列序号需 **减一** 转换为下标。  \\n- 仅生成一份报表 JSON。  \\n\\n\\n---\\n\\n\\n## 示例\\n```json\\n{\\n  \\\"styles\\\": [\\n    { \\\"font\\\": { \\\"bold\\\": true } },\\n    { \\\"color\\\": \\\"#ff0000\\\" }\\n  ],\\n  \\\"rows\\\": {\\n    \\\"0\\\": {\\n      \\\"cells\\\": {\\n        \\\"0\\\": { \\\"text\\\": \\\"加粗文字\\\", \\\"style\\\": 0 },\\n        \\\"1\\\": { \\\"text\\\": \\\"红色文字\\\", \\\"style\\\": 1 },\\n        \\\"2\\\": { \\\"text\\\": \\\"${dbKey.dbField}\\\", \\\"style\\\": 1 }\\n      }\\n    }\\n  },\\n  \\\"cols\\\": {\\n    \\\"1\\\": { \\\"width\\\": 100 }\\n  },\\n  \\\"merges\\\": [\\\"A1:B1\\\"]\\n}\\n```\\n\\n\"},{\"role\":\"user\",\"content\":\"用户数据集：\\n{{ddl}}\\n用户需求：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"},{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"173366253646540800\",\"type\":\"end\",\"x\":1643,\"y\":336,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"designJson\",\"nodeId\":\"173365800833675264\"}],\"height\":114,\"width\":332}},{\"id\":\"173366439085109248\",\"type\":\"end\",\"x\":1166,\"y\":1662,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":true,\"outputContent\":\"error:选择正确的业务类型\"},\"inputParams\":[],\"outputParams\":[],\"height\":114,\"width\":332}},{\"id\":\"175149164433014784\",\"type\":\"llm\",\"x\":1164,\"y\":598,\"properties\":{\"text\":\"选择表\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":2,\"messages\":[{\"role\":\"system\",\"content\":\"## 任务\\n根据用户需求，从下方数据库表列表中选择所有关联的表名称。\\n\\n\\n## 数据库表列表（格式：表名 | 注释）\\n{{ddl}}\\n\\n## 输出规则\\n1. 严格按JSON数组格式输出，例如：[\\\"order\\\"]。\\n2. 仅包含表名称，无需注释。\\n3. **禁止添加列表外的表**。\\n4. 表的选择范围可以适当大一些。\\n4. 无业务相关性时输出空数组：[]\\n\\n\\n请回复纯JSON，不要包含其他内容。\"},{\"role\":\"user\",\"content\":\"用户需求：{{question}}\"}]},\"inputParams\":[{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"},{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"175153953988444160\",\"type\":\"end\",\"x\":1643,\"y\":564,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"tables\",\"nodeId\":\"175149164433014784\"}],\"height\":114,\"width\":332}},{\"id\":\"175505963485245440\",\"type\":\"llm\",\"x\":1166,\"y\":802,\"properties\":{\"text\":\"生成图表\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"根据以下数据以及用户需求生成符合格式要求的图表数据。\\n\\n\\n## 工作流程：\\n\\n\\n1. 根据用户需求选择一个合适的数据集\\n2. 根据数据集和需求，从图表列表中选择一个合适的图标类型。\\n3. 组装最终输出的json\\n\\n\\n⸻\\n## 可选的图表如下（标识|描述）：\\n\\n\\n- 1维图表\\n  - bar.simple|普通柱形图\\n  - bar.background|带背景柱形图\\n  - bar.horizontal|横向柱形图\\n  - line.simple|普通折线图\\n  - line.area|面积堆积折线图\\n  - line.smooth|平滑曲线折线图\\n  - line.step|阶梯折线图\\n  - pie.simple|普通饼图\\n  - pie.doughnut|环状饼图\\n  - pie.rose|南丁格尔玫瑰饼图\\n  - scatter.simple|普通散点图\\n  - funnel.simple|普通漏斗图\\n  - funnel.pyramid|金字塔漏斗图\\n  - pictorial.spirits|普通象形图\\n  - map.scatter|点地图\\n  - gauge.simple|360°仪表盘\\n  - gauge.simple180|180°仪表盘\\n- 2维\\n  - bar.multi|多数据对比柱形图\\n  - bar.negative|正负条形图\\n  - bar.stack|堆叠柱形图\\n  - bar.stack.horizontal|堆叠条形图\\n  - bar.multi.horizontal|多数据条形柱状图\\n  - line.multi|多数据对比折线图\\n  - mixed.linebar|普通折柱图\\n  - scatter.bubble|气泡散点图\\n  - radar.basic|普通雷达图\\n  - radar.custom|圆形雷达图\\n⸻\\n## 数据集格式说明：\\n```\\n{\\n \\\"dbId\\\": \\\"1069915169263800320\\\",\\n \\\"code\\\": \\\"a\\\",\\n \\\"title\\\": \\\"a\\\",\\n \\\"isList\\\": \\\"1\\\",\\n \\\"type\\\": \\\"0\\\",\\n \\\"children\\\": [\\n  {\\n   \\\"title\\\": \\\"total_sales\\\",\\n   \\\"fieldText\\\": \\\"total_sales\\\"\\n  },\\n  {\\n   \\\"title\\\": \\\"total_returns\\\",\\n   \\\"fieldText\\\": \\\"total_returns\\\"\\n  }\\n ]\\n}\\n```\\n* code：数据集变量名\\n* isList：为”1”表示集合，“0”表示对象\\n* children：为字段列表，包含title（字段名）和fieldText（展示名）\\n* type：0|sql,1|api,2|code,3|json\\n⸻\\n## 输出json格式\\n{\\n  \\\"dataType\\\": \\\"sql\\\",\\n  \\\"apiStatus\\\": \\\"0\\\",\\n  \\\"apiUrl\\\": \\\"\\\",\\n  \\\"dataId\\\": \\\"1069898455939633152\\\",\\n  \\\"axisX\\\": \\\"supplier_name\\\",\\n  \\\"axisY\\\": \\\"total_returns\\\",\\n  \\\"series\\\": \\\"material_name\\\",\\n  \\\"yText\\\": \\\"total_returns\\\",\\n  \\\"xText\\\": \\\"supplier_name\\\",\\n  \\\"dbCode\\\": \\\"a\\\",\\n  \\\"isCustomPropName\\\": false,\\n  \\\"chartType\\\": \\\"line.multi\\\",\\n  \\\"id\\\": \\\"0aGl4PUfbIfy8BMF\\\",\\n  \\\"run\\\": 1,\\n  \\\"title\\\": \\\"\\\",\\n}\\n* dataType：与数据集type对应(0|sql,1|api,2|code,3|json)\\n* dataId：对应数据集dbId\\n* dbCode：对应数据集的code\\n* axisX：分类属性，从数据集字段中取值（fieldText)\\n* axisY：值属性，从数据集字段中取值（fieldText)\\n* series: 系列，从数据集字段中取值（fieldText）\\n* xText：分类属性显示，从数据集字段中取值（title)\\n* yText：值属性显示，从数据集字段中取值（title)\\n* chartType：图表的标识\\n* title：为这个图表起一个标题\\n* isCustomPropName: 如果是api数据集,该值为true\\n* apiStatus: 如果是api数据集则等于\\\"1\\\"，否则\\\"0\\\"\\n\\n\\n## 输出格式\\n* 直接返回JSON数据，不要解释，不要md语法，不要换行符，不要有注释。\\n* 确保输出的json格式正确完整。\"},{\"role\":\"user\",\"content\":\"## 用户数据集：\\n{{ddl}}\\n## 用户需求：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"},{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"175506006644633600\",\"type\":\"end\",\"x\":1643,\"y\":769,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"chart\",\"nodeId\":\"175505963485245440\"}],\"height\":114,\"width\":332}},{\"id\":\"175807569594040320\",\"type\":\"llm\",\"x\":1166,\"y\":1018,\"properties\":{\"text\":\"意图识别\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"你是一个“在线报表的需求分析器”，能够理解用户的需求输入，\\n\\n请根据用户需求与提供的数据集设计，综合判断应执行的工作流步骤，并为每个步骤调整需求描述，同时选择最合适的数据集。  \\n\\n\\n\\n\\n## 可选步骤（格式：标识 | 功能说明）\\n\\n- `genJsonRows` | 生成报表（可选，根据用户的需求描述和数据集设计生成合适的报表设计）\\n\\n- `genChart` | 生成图表（可选，根据用户的需求描述和数据集设计生成合适的图表数据）\\n\\n> **注意：** 至少选择一个步骤，亦可同时选择两者；图表的权重较低。\\n\\n\\n\\n\\n## 数据集格式\\n\\n```\\n\\n{\\n\\n\\\"dbId\\\": \\\"1069915169263800320\\\",\\n\\n\\\"code\\\": \\\"a\\\",\\n\\n\\\"title\\\": \\\"a\\\",\\n\\n\\\"isList\\\": \\\"1\\\",\\n\\n\\\"type\\\": \\\"0\\\",\\n\\n\\\"children\\\": [\\n\\n{\\n\\n\\\"title\\\": \\\"total_sales\\\",\\n\\n\\\"fieldText\\\": \\\"total_sales\\\"\\n\\n},\\n\\n{\\n\\n\\\"title\\\": \\\"total_returns\\\",\\n\\n\\\"fieldText\\\": \\\"total_returns\\\"\\n\\n}\\n\\n]\\n\\n}\\n\\n```\\n\\n* `code`：数据集变量名\\n\\n* `isList`：为”1”表示集合，“0”表示对象\\n\\n* `children`：为字段列表，包含title（展示名）和fieldText（字段名）\\n\\n* `type`：0|sql,1|api,2|code,3|json\\n\\n\\n\\n\\n## 输出格式\\n\\n步骤标识1|需求描述1|数据集code,步骤标识2|需求描述2|数据集code  \\n\\n* 各步骤之间用英文逗号,分隔  \\n\\n* 不得添加额外说明，不要md语法，不要换行符，不要有注释。\\n\\n\\n\\n\\n## 注意：\\n\\n- 在生成需求描述时，应确保不丢失原有需求的全部内容，只是并针对所选步骤微调。\\n\\n\\n\"},{\"role\":\"user\",\"content\":\"## 用户数据集：\\n{{ddl}}\\n## 用户需求：\\n{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"},{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"175808663015538688\",\"type\":\"end\",\"x\":1643,\"y\":985,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"intent\",\"nodeId\":\"175807569594040320\"}],\"height\":114,\"width\":332}},{\"id\":\"221504502491222016\",\"type\":\"llm\",\"x\":1166,\"y\":1237,\"properties\":{\"text\":\"生成excel设计\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"你是一个“在线Excel JSON生成器”，能够理解用户描述并生成符合规范的 JSON。  \\n**严格规则**：\\n1. 只能根据描述生成 JSON。\\n2. JSON 必须合法，可被 `JSON.parse()` 正确解析。\\n3. JSON 中不可以有注释\\n\\n\\n\\n\\n---\\n\\n\\n\\n\\n## 步骤一：理解用户的描述，并生成单元格描述信息\\n   - 行号、列号\\n   - 单元格文字\\n   - 单元格样式（字体加粗、斜体、大小、颜色、背景色、水平/垂直对齐、自动换行、边框）\\n   - 合并单元格信息\\n\\n\\n\\n\\n⸻\\n\\n\\n\\n\\n## 步骤二：使用步骤一种生成的描述信息，生成完整在线Excel JSON\\n### 输出要求\\n- 输出必须是 **合法 JSON**，且能直接被 `JSON.parse()` 正确解析。  \\n- JSON 的结构必须包含以下部分：  \\n  - `\\\"styles\\\"`：样式数组，每个元素对应一种样式（如字体加粗、字体颜色、边框等），并在单元格里通过 `style` 字段引用  \\n  - `\\\"merges\\\"`：合并单元格区域（如 `\\\"D3:E4\\\"`）  \\n  - `\\\"rows\\\"`：行数据，每一行包含 `cells`，每个 `cell` 可包含：\\n    - `\\\"text\\\"`：单元格文字  \\n    - `\\\"style\\\"`：引用 `styles` 数组中的下标  \\n    - `\\\"merge\\\"`：若为合并单元格，标注合并范围 示例[1,2]:下标[0]纵向合并1格,下标[1]横向合并2格，\\n    - `\\\"height\\\"`：行高  \\n    - `\\\"width\\\"`：列宽（放在 `\\\"cols\\\"` 部分）  \\n  - `\\\"cols\\\"`：列宽配置  \\n\\n\\n\\n\\n### 样式规则\\n- 样式在 `\\\"styles\\\"` 中定义：  \\n  - `font`：字体\\n    - `bold`: 是否加粗（如：`true`）\\n    - `italic`: 是否斜体（如：`true`）\\n    - `size`: 字体大小单位pt,默认10\\n  - `underline`: 下划线（如：`true`）\\n  - `strike`: 删除线（如：`true`）\\n  - `color`（字体颜色）  \\n  - `bgcolor`（背景色）  \\n  - `align`（left/center/right）  \\n  - `valign`（top/middle/bottom）  \\n  - `textwrap`（自动换行）  \\n  - `border`\\n    - `top`：上边框（如 `[\\\"thin\\\",\\\"#000\\\"]`）  \\n    - `bottom`：下边框（如 `[\\\"thin\\\",\\\"#000\\\"]`）  \\n    - `left`：左边框（如 `[\\\"thin\\\",\\\"#000\\\"]`）  \\n    - `right`：右边框（如 `[\\\"thin\\\",\\\"#000\\\"]`）  \\n\\n\\n\\n\\n### 行列规则\\n- `\\\"rows\\\"` 中的 key 是行号（从 0 开始）  \\n- `\\\"cells\\\"` 中的 key 是列号（从 0 开始）  \\n- 可指定 `\\\"height\\\"` 设置行高  \\n- `\\\"cols\\\"` 中的 key 是列号，值包含 `\\\"width\\\"` 设置列宽  \\n\\n\\n\\n\\n## 合并规则\\n- `\\\"merge\\\": [纵向合并格数, 横向合并格数]`  \\n  - 纵向合并格数与横向合并格数是不包含当前单元格的数量（如 纵向合并格数 等于1 就是向下合并一行；横向合并格数同理）\\n- 被合并覆盖的单元格无需再定义  \\n\\n\\n\\n\\n## 示例\\n（简化示例）\\n\\n\\n\\n\\n```json\\n{\\n  \\\"styles\\\": [\\n    { \\\"font\\\": { \\\"bold\\\": true } },\\n    { \\\"color\\\": \\\"#ff0000\\\" }\\n  ],\\n  \\\"rows\\\": {\\n    \\\"0\\\": {\\n      \\\"cells\\\": {\\n        \\\"0\\\": { \\\"text\\\": \\\"加粗文字\\\", \\\"style\\\": 0 },\\n        \\\"1\\\": { \\\"text\\\": \\\"红色文字\\\", \\\"style\\\": 1 }\\n      }\\n    }\\n  },\\n  \\\"cols\\\": {\\n    \\\"1\\\": { \\\"width\\\": 100 }\\n  },\\n  \\\"merges\\\": [\\\"A1:B1\\\"],\\n}\\n\\n\\n\\n\\n## 特别说明\\n- JSON 必须 **纯净**：无注释、无 markdown、无省略号。  \\n- 用户指定的样式不能改动，可在此基础上做美化。\\n- 除非用户明确要求，默认都对生成的报表做基础美化（如增加边框、设置字体、设置背景色）\\n- 用户描述的行列序号需 **减一** 转换为下标。  \\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\"},{\"role\":\"user\",\"content\":\"理解用户需求，并按要求生成json数据。\\n用户需求如下：\\n{{question}}\\n\\n\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"221512800426758144\",\"type\":\"end\",\"x\":1643,\"y\":1201,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"designJson\",\"nodeId\":\"221504502491222016\"}],\"height\":114,\"width\":332}},{\"id\":\"223992240450801664\",\"type\":\"llm\",\"x\":1166,\"y\":1441,\"properties\":{\"text\":\"提示词生成\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":0.7}},\"history\":3,\"messages\":[{\"role\":\"system\",\"content\":\"# 报表生成提示词优化器\\n\\n\\n## 目标\\n\\n\\n根据用户输入的需求和数据集定义，自动生成简洁、明确的用户 message。\\n系统会自动带上数据集定义，因此无需包含数据集定义内容。\\n\\n\\n## 工作流程\\n\\n\\n### 步骤一：理解需求与数据集\\n\\n\\n- 从用户的自然语言需求和数据集定义中，提取**业务方向**。\\n- 业务方向示例：\\n    - 个人简历\\n    - 项目报价\\n    - 数据统计\\n    - 财务报表\\n    - 产品清单\\n\\n\\n### 步骤二：扩展提示词\\n\\n\\n- 针对识别出的业务方向，扩展提示词，使其更贴合业务场景。\\n- 示例：\\n    如果用户需求是\\\"生成一份个人简历\\\"，则扩展提示词为：\\n    \\\"请基于数据集生成个人简历模版，突出教育背景、工作经历和技能展示。\\\"\\n\\n\\n### 步骤三：生成用户 message\\n\\n\\n- 输出最终的用户 message，不包含系统提示词，不包含数据集定义。\\n- 要求：\\n    - 保留用户需求的原意。\\n    - 优化表达，使 AI 更好地理解并执行任务。\\n    - 根据业务方向，附加必要的模版说明。\\n    - 提示词结构最好包含：\\n        - 主要需求：用户的主要需求，比如：生成一个用于软件产品的报价表。\\n        - 结构要求：对于生成的内容的要求\\n        - 样式要求：对样式的整体和细节的要求，比如：整体排版美观、标题使用16号字。\\n\\n\\n#### 输出示例：\\n\\n\\n```\\n生成一个 **员工薪资报表**，要求如下：  \\n\\n\\n1. **数据内容**  \\n   - 报表需要展示以下信息：员工姓名、性别、生日、联系电话、薪资。  \\n\\n\\n2. **样式要求**  \\n   - 添加一个醒目的报表标题，字体16号。  \\n   - 标题行使用蓝色背景，并且字体加粗。  \\n   - 数据行保持清晰整齐，便于阅读。  \\n\\n\\n3. **输出要求**  \\n   - 表格内容规范，排版美观，符合员工薪资报表的格式。 \\n```\\n\\n\\n\\n\\n## 输出要求\\n\\n\\n- 最终输出为简洁明了的用户 message。\\n- 不限定关键词和字段，完全根据需求和数据集定义生成。\\n- 控制长度，不要超过500字。\\n\\n\"},{\"role\":\"user\",\"content\":\"用户需求：\\n{{question}}\\n数据集定义\\n{{ddl}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"},{\"field\":\"ddl\",\"name\":\"ddl\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"223993058876952576\",\"type\":\"end\",\"x\":1652,\"y\":1408,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":false,\"outputContent\":\"\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"text\",\"name\":\"prompt\",\"nodeId\":\"223992240450801664\"}],\"height\":114,\"width\":332}}],\"edges\":[{\"id\":\"172957153288454144\",\"type\":\"base-edge\",\"sourceNodeId\":\"172956395755208704\",\"targetNodeId\":\"172957153284259840\",\"sourceAnchorId\":\"172956395755208704_output\",\"targetAnchorId\":\"172957153284259840_input\",\"pointsList\":[{\"x\":1332,\"y\":101},{\"x\":1432,\"y\":101},{\"x\":1377,\"y\":103},{\"x\":1477,\"y\":103}]},{\"id\":\"173365501234540544\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"173365501230346240\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"173365501230346240_input\",\"pointsList\":[{\"x\":428,\"y\":443},{\"x\":528,\"y\":443},{\"x\":422,\"y\":469},{\"x\":522,\"y\":469}]},{\"id\":\"173366253650735104\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365800833675264\",\"targetNodeId\":\"173366253646540800\",\"sourceAnchorId\":\"173365800833675264_output\",\"targetAnchorId\":\"173366253646540800_input\",\"pointsList\":[{\"x\":1333,\"y\":309},{\"x\":1433,\"y\":309},{\"x\":1377,\"y\":310},{\"x\":1477,\"y\":310}]},{\"id\":\"173372961415852032\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"172956395755208704\",\"sourceAnchorId\":\"173365501230346240_source_if\",\"targetAnchorId\":\"172956395755208704_input\",\"pointsList\":[{\"x\":854,\"y\":503},{\"x\":954,\"y\":503},{\"x\":900,\"y\":101},{\"x\":1000,\"y\":101}]},{\"id\":\"173372967073968128\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"173365800833675264\",\"sourceAnchorId\":\"173365501230346240_case_2\",\"targetAnchorId\":\"173365800833675264_input\",\"pointsList\":[{\"x\":854,\"y\":529},{\"x\":954,\"y\":529},{\"x\":901,\"y\":309},{\"x\":1001,\"y\":309}]},{\"id\":\"173372974988619776\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"173366439085109248\",\"sourceAnchorId\":\"173365501230346240_source_else\",\"targetAnchorId\":\"173366439085109248_input\",\"pointsList\":[{\"x\":854,\"y\":685},{\"x\":954,\"y\":685},{\"x\":900,\"y\":1636},{\"x\":1000,\"y\":1636}]},{\"id\":\"175149164437209088\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"175149164433014784\",\"sourceAnchorId\":\"173365501230346240_case_3\",\"targetAnchorId\":\"175149164433014784_input\",\"pointsList\":[{\"x\":854,\"y\":555},{\"x\":954,\"y\":555},{\"x\":898,\"y\":539},{\"x\":998,\"y\":539}]},{\"id\":\"175153997969915904\",\"type\":\"base-edge\",\"sourceNodeId\":\"175149164433014784\",\"targetNodeId\":\"175153953988444160\",\"sourceAnchorId\":\"175149164433014784_output\",\"targetAnchorId\":\"175153953988444160_input\",\"pointsList\":[{\"x\":1330,\"y\":539},{\"x\":1430,\"y\":539},{\"x\":1377,\"y\":538},{\"x\":1477,\"y\":538}]},{\"id\":\"175505963489439744\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"175505963485245440\",\"sourceAnchorId\":\"173365501230346240_case_4\",\"targetAnchorId\":\"175505963485245440_input\",\"pointsList\":[{\"x\":854,\"y\":581},{\"x\":954,\"y\":581},{\"x\":900,\"y\":743},{\"x\":1000,\"y\":743}]},{\"id\":\"175506006648827904\",\"type\":\"base-edge\",\"sourceNodeId\":\"175505963485245440\",\"targetNodeId\":\"175506006644633600\",\"sourceAnchorId\":\"175505963485245440_output\",\"targetAnchorId\":\"175506006644633600_input\",\"pointsList\":[{\"x\":1332,\"y\":743},{\"x\":1432,\"y\":743},{\"x\":1377,\"y\":743},{\"x\":1477,\"y\":743}]},{\"id\":\"175807569598234624\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"175807569594040320\",\"sourceAnchorId\":\"173365501230346240_case_5\",\"targetAnchorId\":\"175807569594040320_input\",\"pointsList\":[{\"x\":854,\"y\":607},{\"x\":954,\"y\":607},{\"x\":900,\"y\":959},{\"x\":1000,\"y\":959}]},{\"id\":\"175808663019732992\",\"type\":\"base-edge\",\"sourceNodeId\":\"175807569594040320\",\"targetNodeId\":\"175808663015538688\",\"sourceAnchorId\":\"175807569594040320_output\",\"targetAnchorId\":\"175808663015538688_input\",\"pointsList\":[{\"x\":1332,\"y\":959},{\"x\":1432,\"y\":959},{\"x\":1377,\"y\":959},{\"x\":1477,\"y\":959}]},{\"id\":\"221512800426758145\",\"type\":\"base-edge\",\"sourceNodeId\":\"221504502491222016\",\"targetNodeId\":\"221512800426758144\",\"sourceAnchorId\":\"221504502491222016_output\",\"targetAnchorId\":\"221512800426758144_input\",\"pointsList\":[{\"x\":1332,\"y\":1178},{\"x\":1432,\"y\":1178},{\"x\":1377,\"y\":1175},{\"x\":1477,\"y\":1175}]},{\"id\":\"221534054756093952\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"221504502491222016\",\"sourceAnchorId\":\"173365501230346240_case_6\",\"targetAnchorId\":\"221504502491222016_input\",\"pointsList\":[{\"x\":854,\"y\":633},{\"x\":954,\"y\":633},{\"x\":900,\"y\":1178},{\"x\":1000,\"y\":1178}]},{\"id\":\"223992240454995968\",\"type\":\"base-edge\",\"sourceNodeId\":\"173365501230346240\",\"targetNodeId\":\"223992240450801664\",\"sourceAnchorId\":\"173365501230346240_case_7\",\"targetAnchorId\":\"223992240450801664_input\",\"pointsList\":[{\"x\":854,\"y\":659},{\"x\":954,\"y\":659},{\"x\":900,\"y\":1382},{\"x\":1000,\"y\":1382}]},{\"id\":\"223993058881146880\",\"type\":\"base-edge\",\"sourceNodeId\":\"223992240450801664\",\"targetNodeId\":\"223993058876952576\",\"sourceAnchorId\":\"223992240450801664_output\",\"targetAnchorId\":\"223993058876952576_input\",\"pointsList\":[{\"x\":1332,\"y\":1382},{\"x\":1432,\"y\":1382},{\"x\":1386,\"y\":1382},{\"x\":1486,\"y\":1382}]}]}', `status` = 'enable', `metadata` = '{\"outputs\":[{\"field\":\"text\",\"name\":\"prompt\",\"nodeId\":\"223992240450801664\"},{\"field\":\"outputText\",\"type\":\"string\"}],\"inputs\":[{\"field\":\"content\",\"name\":\"用户问题\",\"required\":true,\"type\":\"string\"},{\"field\":\"history\",\"name\":\"历史记录\",\"required\":false,\"type\":\"string[]\"},{\"field\":\"ddl\",\"name\":\"表结构\",\"required\":true,\"type\":\"string\"},{\"field\":\"dbtype\",\"name\":\"数据库类型\",\"required\":true,\"type\":\"string\"},{\"field\":\"bizType\",\"name\":\"业务类型\",\"required\":true,\"type\":\"string\"}]}' WHERE `id` = '1909856345692065793';

-- ---author:wangshuai---date:20250902-----for:【QQYUN-13415】租户改造菜单、菜单权限及租户管理员角色升级sql
-- 新增用户按钮权限升级sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1214462306546319322', '119213522910765570', '新增用户', '', '', 1, NULL, NULL, 2, 'system:user:addTenantUser', '1', 1.00, 0, NULL, 1, 0, 0, NULL, NULL, 'admin', '2020-01-07 16:22:32', NULL, NULL, 0, 0, '1', 0);

-- 删除用户按钮权限
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592114574275211345', '119213522910765570', '删除用户', NULL, NULL, 0, NULL, NULL, 2, 'system:user:delete', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:17:49', NULL, NULL, 0, 0, '1', 0);

-- 新增租户部门菜单升级sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1961009998209257473', '1674708136602542082', '租户部门', '/depart/TenantDepartList', 'system/depart/TenantDepartList', 1, '', NULL, 1, NULL, '0', 3.30, 0, 'ant-design:apartment-outlined', 1, 0, 0, 0, NULL, 'admin', '2025-08-28 18:16:32', 'admin', '2025-08-29 10:20:25', 0, 0, NULL, 0);

-- 添加一个用户和多个套餐关系按钮权限
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1960994076329316353', '119213522910765570', '添加一个用户和多个套餐关系', NULL, NULL, 0, NULL, NULL, 2, 'system:tenant:addPacksUser', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2025-08-28 17:13:16', NULL, NULL, 0, 0, '1', 0);

-- 新增租户套餐菜单升级sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1961253156897710081', '1674708136602542082', '租户套餐', '/pack/TenantCurrentPackList', 'system/tenant/pack/TenantCurrentPackList', 1, '', NULL, 1, NULL, '0', 3.40, 0, 'ant-design:read-filled', 1, 0, 0, 0, NULL, 'admin', '2025-08-29 10:22:46', 'admin', '2025-08-29 10:24:46', 0, 0, NULL, 0);

-- 产品包查询列表权限升级菜单
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1609123240547344376', '1961253156897710081', '产品包分页列表查询', NULL, NULL, 0, NULL, NULL, 2, 'system:tenant:packList', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-12-31 17:44:11', NULL, NULL, 0, 0, '1', 0);

-- 我的租户变更为叶子节点
UPDATE `sys_permission` SET  `is_leaf` = 0 WHERE `id` = '1961253156897710081';

-- 查询租户下用户按钮权限升级sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1600108123037913486', '1961253156897710081', '查询租户下用户', NULL, NULL, 0, NULL, NULL, 2, 'system:tenant:user:list', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-12-06 20:41:20', 'admin', '2023-01-11 12:10:48', 0, 0, '1', 0);

-- 邀请人员加入
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1600105607009162230', '1961253156897710081', '邀请用户', NULL, NULL, 0, NULL, NULL, 2, 'system:tenant:invitation:user', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-12-06 20:31:20', NULL, NULL, 0, 0, '1', 0);

-- 租户角色设置成非叶子节点
UPDATE `sys_permission` SET `is_leaf` = 0 WHERE `id` = '1597419994965786625';

-- 角色编辑按钮权限升级sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592120372296522490', '1597419994965786625', '角色编辑', NULL, NULL, 0, NULL, NULL, 2, 'system:role:edit', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:40:52', NULL, NULL, 0, 0, '1', 0);

-- 角色添加按钮权限升级sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592120323667750934', '1597419994965786625', '角色添加', NULL, NULL, 0, NULL, NULL, 2, 'system:role:add', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:40:40', NULL, NULL, 0, 0, '1', 0);

-- 角色删除按钮权限升级sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592120427223412865', '1597419994965786625', '角色删除', NULL, NULL, 0, NULL, NULL, 2, 'system:role:delete', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:41:05', NULL, NULL, 0, 0, '1', 0);

-- 角色添加已有用户按钮权限升级sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592102143467200514', '1597419994965786625', '给指定角色添加用户', NULL, NULL, 0, NULL, NULL, 2, 'system:user:addUserRole', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:18:49', NULL, NULL, 0, 0, '1', 0);

-- 角色删除已有用户按钮权限升级sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592114893302823614', '1597419994965786625', '删除指定角色的用户关系', NULL, NULL, 0, NULL, NULL, 2, 'system:user:deleteRole', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:19:05', NULL, NULL, 0, 0, '1', 0);

-- 角色批量删除已有用户按钮权限升级sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592114955650691174', '1597419994965786625', '批量删除指定角色的用户关系', NULL, NULL, 0, NULL, NULL, 2, 'system:user:deleteRoleBatch', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:19:20', NULL, NULL, 0, 0, '1', 0);

-- 租户部门设置成非叶子节点
UPDATE `sys_permission` SET `is_leaf` = 0 WHERE `id` = '1961009998209257473';

-- 添加部门按钮权限sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592115712422330529', '1961009998209257473', '部门添加', NULL, NULL, 0, NULL, NULL, 2, 'system:depart:add', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:22:21', 'admin', '2022-11-14 19:30:49', 0, 0, '1', 0);

-- 编辑部门按钮权限sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592117222764277032', '1961009998209257473', '部门编辑', NULL, NULL, 0, NULL, NULL, 2, 'system:depart:edit', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:28:21', 'admin', '2022-11-14 19:30:55', 0, 0, '1', 0);

-- 删除、批量删除部门按钮权限sql
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592117276539449346', '1961009998209257473', '部门删除', NULL, NULL, 0, NULL, NULL, 2, 'system:depart:delete', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:28:33', 'admin', '2022-11-14 19:31:06', 0, 0, '1', 0);
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1592117377299214338', '1961009998209257473', '部门批量删除', NULL, NULL, 0, NULL, NULL, 2, 'system:depart:deleteBatch', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-11-14 19:28:58', 'admin', '2022-11-14 19:31:12', 0, 0, '1', 0);

-- 租户管理员角色升级sql
INSERT INTO `sys_role` (`id`, `role_name`, `role_code`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `tenant_id`) VALUES ('1962488045068464130', '租户管理员', 'zuhuadmin', NULL, 'admin', '2025-09-01 20:09:46', NULL, NULL, 0);

-- 租户管理员菜单权限
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962489414454194178', '1962488045068464130', '1609123240547344385', NULL, '2025-09-01 20:15:12', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251539722241', '1962488045068464130', '1674708136602542082', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251548110850', '1962488045068464130', '1663816667704500225', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251552305154', '1962488045068464130', '119213522910765570', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251552305155', '1962488045068464130', '1592114574275211345', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251560693762', '1962488045068464130', '1960994076329316353', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251560693763', '1962488045068464130', '1214462306546319322', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251560693764', '1962488045068464130', '1597419994965786625', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251560693765', '1962488045068464130', '1592102143467200514', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251569082370', '1962488045068464130', '1592114893302823614', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251569082371', '1962488045068464130', '1592120323667750934', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251569082372', '1962488045068464130', '1592120372296522490', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251569082373', '1962488045068464130', '1592120427223412865', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251573276674', '1962488045068464130', '1961009998209257473', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251573276675', '1962488045068464130', '1592115712422330529', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251573276676', '1962488045068464130', '1592117222764277032', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251573276677', '1962488045068464130', '1592117276539449346', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251581665281', '1962488045068464130', '1592117377299214338', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251581665282', '1962488045068464130', '1961253156897710081', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251585859586', '1962488045068464130', '1600105607009162230', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251585859587', '1962488045068464130', '1600108123037913486', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962765251585859588', '1962488045068464130', '1609123240547344376', NULL, '2025-09-02 14:31:17', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1962766200899461121', '1962488045068464130', '1592114955650691174', NULL, '2025-09-02 14:35:03', '192.168.1.6');

-- ---author:liusq---date:20250902-----for:修改默认首页的关联类型
UPDATE sys_role_index SET `relation_type` = 'DEFAULT' WHERE `role_code` = 'DEF_INDEX_ALL';

-- ---author:liusq---date:20250902-----for:关联类型字典增加default类型
INSERT INTO `sys_dict_item`(`id`, `dict_id`, `item_text`, `item_value`, `item_color`, `description`, `sort_order`, `status`, `create_by`, `create_time`, `update_by`, `update_time`) VALUES ('1963079150651305985', '1939572486447292418', '全局默认', 'DEFAULT', NULL, NULL, 3, 1, 'admin', '2025-09-03 11:18:36', NULL, NULL);


-- ---author:wangshuai---date:20250903-----for: 租户改造菜单、菜单权限、套餐增加是否自动分配给用户字段、test角色名称描述修改
-- 租户请离按钮权限
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1600129606082650123', '119213522910765570', '租户请离', NULL, NULL, 0, NULL, NULL, 2, 'system:tenant:leave', '1', NULL, 0, NULL, 1, 0, 0, 0, NULL, 'admin', '2022-12-06 22:06:42', NULL, NULL, 0, 0, '1', 0);

-- 租户职务菜单
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1963086454217281537', '1674708136602542082', '租户职务', '/position/TenantPositionList', 'system/position/TenantPositionList', 1, '', NULL, 1, NULL, '0', 3.50, 0, 'ant-design:user-outlined', 1, 0, 0, 0, NULL, 'admin', '2025-09-03 11:47:38', NULL, NULL, 0, 0, NULL, 0);

-- 新版我的租户
INSERT INTO `sys_permission` (`id`, `parent_id`, `name`, `url`, `component`, `is_route`, `component_name`, `redirect`, `menu_type`, `perms`, `perms_type`, `sort_no`, `always_show`, `icon`, `is_leaf`, `keep_alive`, `hidden`, `hide_tab`, `description`, `create_by`, `create_time`, `update_by`, `update_time`, `del_flag`, `rule_flag`, `status`, `internal_or_external`) VALUES ('1963133393868722178', '1674708136602542082', '我的租户', '/my/MyTenantDetail', 'system/tenant/my/MyTenantDetail', 1, '', NULL, 1, NULL, '0', 3.00, 0, 'ant-design:user-outlined', 1, 0, 0, 0, NULL, 'admin', '2025-09-03 14:54:09', NULL, NULL, 0, 0, NULL, 0);

-- 租户管理员角色菜单权限
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1963068885343252482', '1962488045068464130', '1600129606082650123', NULL, '2025-09-03 10:37:49', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1963086686351036418', '1962488045068464130', '1963086454217281537', NULL, '2025-09-03 11:48:33', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1963133491872829442', '1962488045068464130', '1963133393868722178', NULL, '2025-09-03 14:54:32', '192.168.1.6');

-- 套餐增加是否自动分配给用户字段
ALTER TABLE `sys_tenant_pack`
ADD COLUMN `iz_sysn` varchar(1) NULL COMMENT '自动分配给用户(0否 1是)' AFTER `pack_type`;

-- test角色名称描述修改
UPDATE `sys_role` SET `role_name` = '系统用户标配角色', `role_code` = 'test', `description` = '系统所有用户拥有的最小权限角色，默认都分配这个角色' WHERE `id` = 'ee8626f80f7c2619917b6236f3a7f02b';

-- test角色新增授权，默认授权用户设置
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1963153837854330881', 'ee8626f80f7c2619917b6236f3a7f02b', '1596141938193747970', NULL, '2025-09-03 16:15:23', '192.168.1.6');
INSERT INTO `sys_role_permission` (`id`, `role_id`, `permission_id`, `data_rule_ids`, `operate_date`, `operate_ip`) VALUES ('1963153837854330882', 'ee8626f80f7c2619917b6236f3a7f02b', '1596335805278990338', NULL, '2025-09-03 16:15:23', '192.168.1.6');

-- ---author:wangshuai---date:20250906-----for: 【QQYUN-13637】增加部门岗位用户中间表

-- 删除兼职岗位

ALTER TABLE `sys_user` 
DROP COLUMN `other_dep_post_id`;

-- 增加用户部门岗位中间表

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for sys_user_dep_post
-- ----------------------------
DROP TABLE IF EXISTS `sys_user_dep_post`;
CREATE TABLE `sys_user_dep_post`  (
  `id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '主键',
  `user_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '用户id',
  `dep_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '部门岗位id',
  `create_by` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '创建人',
  `create_time` datetime NULL DEFAULT NULL COMMENT '创建时间',
  `update_by` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '更新人',
  `update_time` datetime NULL DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_sudp_user_id`(`user_id`) USING BTREE,
  INDEX `idx_sudp_dep_id`(`dep_id`) USING BTREE,
  INDEX `idx_sudp_user_dep_id`(`user_id`, `dep_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = Dynamic;

SET FOREIGN_KEY_CHECKS = 1;

-- ---author:wangshuai---date:20250908-----for: 删除旧的我的租户菜单
    
-- 删除旧版我的租户菜单
delete from sys_permission where id = '1663816667704500225';

-- ---author:wangshuai---date:20250908-----for: 【JHHB-177】【用户管理】添加职务字段 获取字典

-- 用户增加职务
ALTER TABLE `sys_user`
ADD COLUMN `position_type` varchar(32) NULL COMMENT '职务(字典)' AFTER `main_dep_post_id`;

-- 职务字典
INSERT INTO `sys_dict` (`id`, `dict_name`, `dict_code`, `description`, `del_flag`, `create_by`, `create_time`, `update_by`, `update_time`, `type`, `tenant_id`, `low_app_id`) VALUES ('1964944899916697602', '用户职务', 'user_position', '用户职务', 0, 'admin', '2025-09-08 14:52:26', NULL, NULL, 0, 0, NULL);
INSERT INTO `sys_dict_item` (`id`, `dict_id`, `item_text`, `item_value`, `description`, `sort_order`, `status`, `create_by`, `create_time`, `update_by`, `update_time`, `item_color`) VALUES ('1964944982842281986', '1964944899916697602', '董事长', '0', NULL, 0, 1, 'admin', '2025-09-08 14:52:45', 'admin', '2025-09-08 14:53:54', NULL);
INSERT INTO `sys_dict_item` (`id`, `dict_id`, `item_text`, `item_value`, `description`, `sort_order`, `status`, `create_by`, `create_time`, `update_by`, `update_time`, `item_color`) VALUES ('1964945020519714817', '1964944899916697602', '总经理', '1', NULL, 1, 1, 'admin', '2025-09-08 14:52:54', NULL, NULL, NULL);
INSERT INTO `sys_dict_item` (`id`, `dict_id`, `item_text`, `item_value`, `description`, `sort_order`, `status`, `create_by`, `create_time`, `update_by`, `update_time`, `item_color`) VALUES ('1964945061850386434', '1964944899916697602', '副总经理', '2', NULL, 2, 1, 'admin', '2025-09-08 14:53:04', 'admin', '2025-09-08 14:53:46', NULL);
INSERT INTO `sys_dict_item` (`id`, `dict_id`, `item_text`, `item_value`, `description`, `sort_order`, `status`, `create_by`, `create_time`, `update_by`, `update_time`, `item_color`) VALUES ('1964945100802887681', '1964944899916697602', '部长', '3', NULL, 3, 1, 'admin', '2025-09-08 14:53:14', 'admin', '2025-09-08 14:53:43', NULL);
INSERT INTO `sys_dict_item` (`id`, `dict_id`, `item_text`, `item_value`, `description`, `sort_order`, `status`, `create_by`, `create_time`, `update_by`, `update_time`, `item_color`) VALUES ('1964945142854979586', '1964944899916697602', '副部长', '4', NULL, 4, 1, 'admin', '2025-09-08 14:53:24', 'admin', '2025-09-08 14:53:40', NULL);
INSERT INTO `sys_dict_item` (`id`, `dict_id`, `item_text`, `item_value`, `description`, `sort_order`, `status`, `create_by`, `create_time`, `update_by`, `update_time`, `item_color`) VALUES ('1964945196395270146', '1964944899916697602', '职员', '5', NULL, 5, 1, 'admin', '2025-09-08 14:53:36', NULL, NULL, NULL);

-- ---author:chenrui---date:20250909-----for: aiflow-kotlin执行报错
UPDATE `airag_flow` SET  `chain` = 'THEN(\n    start.tag(\'start-node\'),\n    llm.tag(\'160650416019521536\'),\n    WHEN(\n        code_160652991133433856.tag(\'code_160652991133433856\'),\n        code_166081977564753920.tag(\'code_166081977564753920\'),\n        code_167835393352683520.tag(\'code_167835393352683520\')\n    ).tag(\"code_160652991133433856\"),\n    end.tag(\'160656278891560960\')\n).tag(\"start-node\")', `design` = '{\"nodes\":[{\"id\":\"start-node\",\"type\":\"start\",\"x\":300,\"y\":418,\"properties\":{\"text\":\"开始\",\"remarks\":\"\",\"options\":{},\"inputParams\":[{\"field\":\"history\",\"name\":\"历史记录\",\"type\":\"string[]\",\"required\":false},{\"field\":\"content\",\"name\":\"用户问题\",\"type\":\"string\",\"required\":true}],\"outputParams\":[],\"height\":92,\"width\":332}},{\"id\":\"160650416019521536\",\"type\":\"llm\",\"x\":693,\"y\":462,\"properties\":{\"text\":\"LLM\",\"options\":{\"model\":{\"modeId\":\"1890232564262739969\",\"params\":{\"model\":\"OpenAI\",\"temperature\":null,\"topP\":0.9,\"presencePenalty\":0.1,\"frequencyPenalty\":0.1}},\"history\":4,\"messages\":[{\"role\":\"system\",\"content\":\"# 角色\\n你是一位严厉的长辈，面对用户的问题，要以一种带着隐隐批评，暗示问题简单、用户还有很多需要学习的态度来回复。通过大模型模拟李白来对话，回答用户提出的各种问题。\\n\\n\\n## 技能\\n### 技能 1: 回答问题\\n1. 当用户提出问题时，先简要评价问题较为简单，然后给出回答。\\n2. 回答完问题后，适当提及用户还需要加强学习、增长见识等内容。\\n\\n\\n## 限制:\\n- 回复内容必须逻辑清晰、语言通顺，符合严厉长辈的角色设定。 \\n\\n\"},{\"role\":\"user\",\"content\":\"{{question}}\"}]},\"inputParams\":[{\"field\":\"content\",\"name\":\"question\",\"nodeId\":\"start-node\"}],\"outputParams\":[{\"field\":\"text\",\"name\":\"回复内容\",\"type\":\"string\"}],\"height\":180,\"width\":332}},{\"id\":\"code_160652991133433856\",\"type\":\"code\",\"x\":1135,\"y\":179,\"properties\":{\"text\":\"js\",\"options\":{\"codeType\":\"javascript\",\"code\":\"function main(params) {\\n  if(params.llmRes){\\n    let resLength  = params.llmRes.length\\n    params.llmRes = params.llmRes + \'\\\\n字数：\'+resLength\\n  }\\n  return {\\n    result: params.llmRes,\\n  }\\n}\"},\"inputParams\":[{\"field\":\"text\",\"name\":\"llmRes\",\"nodeId\":\"160650416019521536\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"返回结果\",\"type\":\"string\",\"required\":false}],\"height\":158,\"width\":332}},{\"id\":\"160656278891560960\",\"type\":\"end\",\"x\":1653,\"y\":449,\"properties\":{\"text\":\"结束\",\"options\":{\"outputText\":true,\"outputContent\":\"js:{{res}}\\ngroovy:{{res1}}\\nkotlin:{{res2}}\\npython:{{res3}}\\naviator:{{res4}}\"},\"inputParams\":[],\"outputParams\":[{\"field\":\"result\",\"name\":\"res\",\"nodeId\":\"code_160652991133433856\"},{\"field\":\"result\",\"name\":\"res1\",\"nodeId\":\"code_166081977564753920\"},{\"field\":\"result\",\"name\":\"res2\",\"nodeId\":\"code_166090618376253440\"},{\"field\":\"result\",\"name\":\"res3\",\"nodeId\":\"code_167828303175372800\"},{\"field\":\"result\",\"name\":\"res4\",\"nodeId\":\"code_167835393352683520\"}],\"height\":136,\"width\":332}},{\"id\":\"code_166081977564753920\",\"type\":\"code\",\"x\":1140,\"y\":413,\"properties\":{\"text\":\"groovy\",\"options\":{\"codeType\":\"groovy\",\"code\":\"def main(params) {\\n    if (params.llmRes) {\\n        def resLength = params.llmRes.length()\\n        params.llmRes += \\\"\\\\n字数：\\\" + resLength\\n    }\\n    return [result: params.llmRes]\\n}\"},\"inputParams\":[{\"field\":\"text\",\"name\":\"llmRes\",\"nodeId\":\"160650416019521536\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"返回结果\",\"type\":\"string\",\"required\":false}],\"height\":158,\"width\":332}},{\"id\":\"code_167835393352683520\",\"type\":\"code\",\"x\":1141,\"y\":667,\"properties\":{\"text\":\"aviator\",\"options\":{\"codeType\":\"aviator\",\"code\":\"let llmRes = params.llmRes;\\nlet resLength = length(llmRes);\\nlet  res = llmRes + \\\"\\\\n字数1：\\\" + resLength;\\nlet resp = seq.map(\\\"result\\\",res);\"},\"inputParams\":[{\"field\":\"text\",\"name\":\"llmRes\",\"nodeId\":\"160650416019521536\"}],\"outputParams\":[{\"field\":\"result\",\"name\":\"返回结果\",\"type\":\"string\"}],\"height\":158,\"width\":332}}],\"edges\":[{\"id\":\"160650416019521537\",\"type\":\"base-edge\",\"sourceNodeId\":\"start-node\",\"targetNodeId\":\"160650416019521536\",\"sourceAnchorId\":\"start-node_output\",\"targetAnchorId\":\"160650416019521536_input\",\"pointsList\":[{\"x\":466,\"y\":403},{\"x\":566,\"y\":403},{\"x\":427,\"y\":403},{\"x\":527,\"y\":403}]},{\"id\":\"160652991137628160\",\"type\":\"base-edge\",\"sourceNodeId\":\"160650416019521536\",\"targetNodeId\":\"code_160652991133433856\",\"sourceAnchorId\":\"160650416019521536_output\",\"targetAnchorId\":\"code_160652991133433856_input\",\"pointsList\":[{\"x\":859,\"y\":403},{\"x\":959,\"y\":403},{\"x\":869,\"y\":131},{\"x\":969,\"y\":131}]},{\"id\":\"160656278899949568\",\"type\":\"base-edge\",\"sourceNodeId\":\"code_160652991133433856\",\"targetNodeId\":\"160656278891560960\",\"sourceAnchorId\":\"code_160652991133433856_output\",\"targetAnchorId\":\"160656278891560960_input\",\"pointsList\":[{\"x\":1301,\"y\":131},{\"x\":1401,\"y\":131},{\"x\":1387,\"y\":412},{\"x\":1487,\"y\":412}]},{\"id\":\"166082001409372160\",\"type\":\"base-edge\",\"sourceNodeId\":\"160650416019521536\",\"targetNodeId\":\"code_166081977564753920\",\"sourceAnchorId\":\"160650416019521536_output\",\"targetAnchorId\":\"code_166081977564753920_input\",\"pointsList\":[{\"x\":859,\"y\":403},{\"x\":959,\"y\":403},{\"x\":874,\"y\":365},{\"x\":974,\"y\":365}]},{\"id\":\"166082017557442560\",\"type\":\"base-edge\",\"sourceNodeId\":\"code_166081977564753920\",\"targetNodeId\":\"160656278891560960\",\"sourceAnchorId\":\"code_166081977564753920_output\",\"targetAnchorId\":\"160656278891560960_input\",\"pointsList\":[{\"x\":1306,\"y\":365},{\"x\":1406,\"y\":365},{\"x\":1387,\"y\":412},{\"x\":1487,\"y\":412}]},{\"id\":\"167835393356877824\",\"type\":\"base-edge\",\"sourceNodeId\":\"160650416019521536\",\"targetNodeId\":\"code_167835393352683520\",\"sourceAnchorId\":\"160650416019521536_output\",\"targetAnchorId\":\"code_167835393352683520_input\",\"pointsList\":[{\"x\":859,\"y\":403},{\"x\":959,\"y\":403},{\"x\":875,\"y\":619},{\"x\":975,\"y\":619}]},{\"id\":\"167836988980817920\",\"type\":\"base-edge\",\"sourceNodeId\":\"code_167835393352683520\",\"targetNodeId\":\"160656278891560960\",\"sourceAnchorId\":\"code_167835393352683520_output\",\"targetAnchorId\":\"160656278891560960_input\",\"pointsList\":[{\"x\":1307,\"y\":619},{\"x\":1407,\"y\":619},{\"x\":1387,\"y\":412},{\"x\":1487,\"y\":412}]}]}', `status` = 'enable', `metadata` = '{\"outputs\":[{\"field\":\"outputText\",\"type\":\"string\"}],\"inputs\":[{\"field\":\"history\",\"name\":\"历史记录\",\"required\":false,\"type\":\"string[]\"},{\"field\":\"content\",\"name\":\"用户问题\",\"required\":true,\"type\":\"string\"}]}' WHERE `id` = '1897552224058400770';

-- ---author:wangshuai---date:20250908-----for: 修改职务表的表述和菜单名称
-- 修改字段名称
ALTER TABLE `sys_position`
MODIFY COLUMN `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '职务级别名称' AFTER `code`,
COMMENT = '职务级别';

-- 更新菜单名称为职务级别
UPDATE `sys_permission` SET `name` = '职务级别' WHERE `id` = '1438469604861403137';

-- 删除旧的用户代理表
drop table if exists sys_user_agent;